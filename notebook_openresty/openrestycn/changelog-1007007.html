<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>OpenResty - ChangeLog 1.7.7</title>
	<link href="fonts.css" tppabs="https://openresty.org/css/fonts.css" rel='stylesheet' type='text/css'>
	<!--
	If you ever wanted to use LESS instead of CSS...
	<link rel="stylesheet" type="text/less" href="/css/main.less">
	<script src="/js/less.js"></script>
	-->
	<link rel="stylesheet" type="text/css" href="main.css" tppabs="http://openresty.org/css/main.css">
</head>
<body>

<header role="header">
        <p class="site-name left">
                <a href="javascript:if(confirm(%27http://openresty.org/cn/.  \n\nThis file was not retrieved by Teleport Ultra, because the server reports that this file cannot be found.  \n\nDo you want to open it from the server?%27))window.location=%27http://openresty.org/cn/.%27" tppabs="http://openresty.org/cn/.">OpenResty</a>
                <small>通过扩展 NGINX 和 Lua 实现的可伸缩的 Web 平台</small>
        </p><!-- / site-name -->

        <form action="http://openresty.org/cn/search.html" class="right">
                <fieldset>
                        <input type="search" name="query" id="search"
                               placeholder="搜索 OpenResty.org 中文站" required>
                </fieldset>
        </form>
</header>


	<div id="wrapper">
		<div class="sidebar sleft">
			<nav id="nav">
<ul>
<li><a href="index.htm" tppabs="http://openresty.org/cn/openresty.html">概览</a></li>
<li><a href="components.html" tppabs="http://openresty.org/cn/components.html">组件</a></li>
<li><a href="getting-started.html" tppabs="http://openresty.org/cn/getting-started.html">新手上路</a></li>
<li><a href="samples.html" tppabs="http://openresty.org/cn/samples.html">样例</a></li>
<li><a href="benchmark.html" tppabs="http://openresty.org/cn/benchmark.html">性能评测</a></li>
<li><a href="presentations.html" tppabs="http://openresty.org/cn/presentations.html">幻灯片</a></li>
<li><a href="ebooks.html" tppabs="http://openresty.org/cn/ebooks.html">电子图书</a></li>
<li><a href="resources.html" tppabs="http://openresty.org/cn/resources.html">资源</a></li>
<li><a href="download.html" tppabs="http://openresty.org/cn/download.html">下载</a></li>
<li><a href="installation.html" tppabs="http://openresty.org/cn/installation.html">安装</a></li>
<li><a href="changes.html" tppabs="http://openresty.org/cn/changes.html">变更历史</a></li>
<li><a href="quality-assurance.html" tppabs="http://openresty.org/cn/quality-assurance.html">测试</a></li>
<li><a href="contact-us.html" tppabs="http://openresty.org/cn/contact-us.html">联系我们</a></li>
<li><a href="javascript:if(confirm(%27https://openresty.org/survey/cn  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://openresty.org/survey/cn%27" tppabs="https://openresty.org/survey/cn">用户问卷调查</a></li>
<li><a href="donate-online.html" tppabs="http://openresty.org/cn/donate-online.html">捐助</a></li>
<li><a href="donors.html" tppabs="http://openresty.org/cn/donors.html">捐款者</a></li>
<li><a href="about.html" tppabs="http://openresty.org/cn/about.html">关于</a></li>
<li><a href="javascript:if(confirm(%27http://openresty.org/en/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://openresty.org/en/%27" tppabs="http://openresty.org/en/">English Site</a></li>
</ul>

			</nav><!-- / nav -->

<ul class="buttons">
    <!-- <li><a href="#" class="btn rss">RSS Feed</a></li> -->
    <li>
        <!-- <a href="#" class="btn paypal">Donate with PayPal</a> -->
        <form name="_xclick" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
        <input type="hidden" name="cmd" value="_xclick">
        <input type="hidden" name="business" value="agentzh@gmail.com">
        <input type="hidden" name="item_name" value="OpenResty Donation (in USD)">
        <input type="hidden" name="currency_code" value="USD">
        <input type="hidden" name="amount" value="">
        <input type="image" src="donate_paypal.gif" tppabs="http://openresty.org/images/donate_paypal.gif" border="0" name="submit" alt="Donate with PayPal">
        </form>
    </li>
</ul>


		</div><!-- / sidebar left -->
		
		<section id="main">
<div class="item">
        <header>
                <h2>ChangeLog 1.7.7</h2>
                <small>
                    <a href="yichun-zhang.html" tppabs="http://openresty.org/cn/yichun-zhang.html">
                    Yichun Zhang
                    </a>,
                    04 Feb 2015 (created 07 Dec 2014)</small>
                <div class="options">
                        <!--
                        <a href="#" class="trigger">Show Options</a>
                        <ul class="first-level">
                                <li><a href="#">close</a></li>
                                <li><a href="#">close others</a></li>
                                <li><a href="#">view</a></li>
                                <li><a href="#">fields</a></li>
                                <li><a href="#">syncing</a></li>
                                <li><a href="#">permalink</a></li>
                                <li><a href="#">references</a></li>
                                <li>
                                        <a href="#">jump</a>
                                        <ul class="second-level">
                                                <li><a href="#">Benchmark</a></li>
                                                <li><a href="#">Presentations</a></li>
                                                <li><a href="#">eBooks</a></li>
                                        </ul>
                                </li>
                        </ul>
                        -->
                </div><!-- / options -->
        </header>
        <div class="body">
<h1 id="version-1.7.7.2---4-february-2015">Version 1.7.7.2 - 4 February 2015</h1>
<ul>
<li>bundled the &quot;resty&quot; command-line utility (version 0.01) from the resty-cli project: <a href="javascript:if(confirm(%27https://github.com/openresty/resty-cli  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/resty-cli%27" tppabs="https://github.com/openresty/resty-cli" class="uri">https://github.com/openresty/resty-cli</a>
<ul>
<li>bugfix: the resty utility could not start when the nginx was built with <code>./configure --conf-path=PATH</code> where <code>PATH</code> was not <code>conf/nginx.conf</code>. thanks Zhengyi Lai for the report.</li>
<li>feature: added support for user-supplied arguments which the user Lua scripts can access via the global Lua table &quot;arg&quot;, just as in the &quot;lua&quot; and &quot;luajit&quot; command-line utilities. thanks Guanlan Dai for the patch.</li>
<li>feature: added new command-line option <code>--nginx=PATH</code> to allow the user to explicitly specify the underlying nginx executable being invoked by this script. thanks Guanlan Dai for the patch.</li>
<li>feature: added support for multiple <code>-I</code> options to specify more than one user library search paths. thanks Guanlan Dai for the patch.</li>
<li>feature: print out resty's own version number when the -V option is specified.</li>
<li>feature: resty: added new options <code>--valgrind</code> and <code>--valgrind-opts=OPTS</code>.</li>
</ul></li>
<li>upgraded <a href="set-misc-nginx-module.html" tppabs="http://openresty.org/cn/set-misc-nginx-module.html">Set Misc Nginx Module</a> to 0.28.
<ul>
<li>feature: added the <a href="javascript:if(confirm(%27https://github.com/openresty/set-misc-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/set-misc-nginx-module#set_base32_alphabet%27" tppabs="https://github.com/openresty/set-misc-nginx-module#set_base32_alphabet">set_base32_alphabet</a> config directive to allow the user to specify the alphabet used for base32 encoding/decoding. thanks Vladislav Manchev for the patch.</li>
<li>bugfix: <a href="javascript:if(confirm(%27https://github.com/openresty/set-misc-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/set-misc-nginx-module#set_quote_sql_str%27" tppabs="https://github.com/openresty/set-misc-nginx-module#set_quote_sql_str">set_quote_sql_str</a>: we incorrectly escaped 0x1a to <code>\z</code> instead of <code>\Z</code>.</li>
<li>change: the old <a href="javascript:if(confirm(%27https://github.com/openresty/set-misc-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/set-misc-nginx-module#set_misc_base32_padding%27" tppabs="https://github.com/openresty/set-misc-nginx-module#set_misc_base32_padding">set_misc_base32_padding</a> directive is now deprecated; use <a href="javascript:if(confirm(%27https://github.com/openresty/set-misc-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/set-misc-nginx-module#set_base32_padding%27" tppabs="https://github.com/openresty/set-misc-nginx-module#set_base32_padding">set_base32_padding</a> instead.</li>
</ul></li>
<li>upgraded <a href="lua-nginx-module.html" tppabs="http://openresty.org/cn/lua-nginx-module.html">Lua Nginx Module</a> to 0.9.14.
<ul>
<li>bugfix: <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#ngxregsub%27" tppabs="https://github.com/openresty/lua-nginx-module#ngxregsub">ngx.re.gsub</a>/<a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#ngxresub%27" tppabs="https://github.com/openresty/lua-nginx-module#ngxresub">ngx.re.sub</a> incorrectly swallowed the character right after a 0-width match that happens to be the last match. thanks Guanlan Dai for the patch.</li>
<li>bugfix: <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#tcpsocksetkeepalive%27" tppabs="https://github.com/openresty/lua-nginx-module#tcpsocksetkeepalive">tcpsock:setkeepalive()</a>: we did not check <code>NULL</code> connection pointers properly, which might lead to segmentation faults. thanks Yang Yue for the report.</li>
<li>bugfix: <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#ngxquote_sql_str%27" tppabs="https://github.com/openresty/lua-nginx-module#ngxquote_sql_str">ngx.quote_str_str()</a> incorrectly escaped &quot;\026&quot; to &quot;\z&quot; while &quot;\Z&quot; is expected. thanks laodouya for the original patch.</li>
<li>bugfix: <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#ngxtimerat%27" tppabs="https://github.com/openresty/lua-nginx-module#ngxtimerat">ngx.timer.at</a>: fixed a small memory leak in case of running out of memory (which should be extremely rare though).</li>
<li>optimize: minor optimizations in timers.</li>
<li>feature: added the Lua global variable <code>__ngx_cycle</code> which is a lightuserdata holding the current <code>ngx_cycle_t</code> pointer, which may simplify some FFI-based Lua extensions.</li>
<li>doc: added a warning for the &quot;share_all_vars&quot; option for <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#ngxlocationcapture%27" tppabs="https://github.com/openresty/lua-nginx-module#ngxlocationcapture">ngx.location.capture*</a>.</li>
</ul></li>
<li>upgraded <a href="lua-resty-core-library.html" tppabs="http://openresty.org/cn/lua-resty-core-library.html">Lua Resty Core Library</a> to 0.1.0.
<ul>
<li>bugfix: resty.core.regex: data corruptions might happen when recursively calling <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#ngxregsub%27" tppabs="https://github.com/openresty/lua-nginx-module#ngxregsub">ngx.re.gsub</a> via the user replacement function argument because of incorrect reusing a globally shared captures Lua table. thanks James Hurst for the report.</li>
<li>bugfix: <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#ngxregsub%27" tppabs="https://github.com/openresty/lua-nginx-module#ngxregsub">ngx.re.gsub</a>: garbage might get injected into gsub result when <code>ngx.*</code> API functions are called inside the user callback function for the replacement. thanks James Hurst for the report.</li>
<li>feature: resty.core.base: added the <code>FFI_BUSY</code> constant for <code>NGX_BUSY</code>.</li>
</ul></li>
<li>upgraded <a href="lua-resty-lrucache-library.html" tppabs="http://openresty.org/cn/lua-resty-lrucache-library.html">Lua Resty Lrucache Library</a> to 0.04.
<ul>
<li>bugfix: resty.lrucache.pureffi: set(): it did not update to the new value at all if the key had an existing value (either stale or not). thanks Shuxin Yang for the patch.</li>
</ul></li>
<li>upgraded <a href="lua-resty-web-socket-library.html" tppabs="http://openresty.org/cn/lua-resty-web-socket-library.html">Lua Resty Web Socket Library</a> to 0.05.
<ul>
<li>feature: <a href="javascript:if(confirm(%27https://github.com/openresty/lua-resty-websocket  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-resty-websocket#restywebsocketclient%27" tppabs="https://github.com/openresty/lua-resty-websocket#restywebsocketclient">resty.websocket.client</a>: added support for SSL/TLS connections (i.e., the <code>wss://</code> scheme). thanks Vladislav Manchev for the patch.</li>
<li>doc: mentioned the <a href="javascript:if(confirm(%27http://bitop.luajit.org/index.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://bitop.luajit.org/index.html%27" tppabs="http://bitop.luajit.org/index.html">bitop</a> library dependency when using the standard Lua 5.1 interpreter (this is not needed for <a href="luajit.html" tppabs="http://openresty.org/cn/luajit.html">LuaJIT</a> because it is already built in). thanks Laurent Arnoud for the patch.</li>
</ul></li>
<li>upgraded <a href="luajit.html" tppabs="http://openresty.org/cn/luajit.html">LuaJIT</a> to v2.1-20150120: <a href="javascript:if(confirm(%27https://github.com/openresty/luajit2/tags  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/luajit2/tags%27" tppabs="https://github.com/openresty/luajit2/tags" class="uri">https://github.com/openresty/luajit2/tags</a>
<ul>
<li>imported Mike Pall's latest changes:
<ul>
<li>bugfix: don't compile <code>IR_RETF</code> after <code>CALLT</code> to ff with side effects.</li>
<li>bugfix: fix <code>BC_UCLO</code>/<code>BC_JMP</code> join optimization in Lua parser.</li>
<li>bugfix: fix corner case in string to number conversion.</li>
<li>bugfix: x86: fix argument checks for <code>ipairs()</code> iterator.</li>
<li>bugfix: gracefully handle <code>lua_error()</code> for a suspended coroutine.</li>
<li>x86/x64: Drop internal x87 math functions. Use libm functions.</li>
<li>x86/x64: Call external symbols directly from interpreter code. (except for ELF/x86 PIC, where it's easier to use wrappers.)</li>
<li>ARM: Minor interpreter optimization.</li>
<li>x86: Minor interpreter optimization.</li>
<li>PPC/e500: Drop support for this architecture.</li>
<li>MIPS: Fix excess stack growth in interpreter.</li>
<li>PPC: Fix excess stack growth in interpreter.</li>
<li>ARM: Fix excess stack growth in interpreter.</li>
<li>ARM: Fix write barrier check in <code>BC_USETS</code>.</li>
<li>ARM64: Add build infrastructure and initial port of interpreter.</li>
<li>OpenBSD/x86: Better executable memory allocation for W^X mode.</li>
</ul></li>
</ul></li>
<li>bugfix: the <code>ngx_http_redis</code> module failed to compile when the <code>ngx_gzip</code> module was disabled. thanks anod221 for the report.</li>
</ul>
<h1 id="version-1.7.7.1---6-december-2014">Version 1.7.7.1 - 6 December 2014</h1>
<ul>
<li>upgraded the <a href="nginx.html" tppabs="http://openresty.org/cn/nginx.html">Nginx</a> core to 1.7.7.
<ul>
<li>see the changes here: <a href="javascript:if(confirm(%27http://nginx.org/en/CHANGES  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://nginx.org/en/CHANGES%27" tppabs="http://nginx.org/en/CHANGES" class="uri">http://nginx.org/en/CHANGES</a></li>
</ul></li>
<li>bugfix: applied a patch to the nginx core to fix the memory invalid reads when exceeding the pre-configured limits in an <code>ngx_hash_t</code> hash table.</li>
<li>bugfix: applied a patch to the nginx core to fix a memory invalid read regression introduced in nginx 1.7.5+'s resolver.</li>
<li>./configure: usage text: renamed <code>--with-luajit=PATH</code> to <code>--with-luajit=DIR</code>. thanks Dominic for the suggestion.</li>
<li>feature: ./configure: added the default prefix value to the usage text.</li>
<li>upgraded <a href="luajit.html" tppabs="http://openresty.org/cn/luajit.html">LuaJIT</a> to v2.1-20141128: <a href="javascript:if(confirm(%27https://github.com/openresty/luajit2/tags  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/luajit2/tags%27" tppabs="https://github.com/openresty/luajit2/tags" class="uri">https://github.com/openresty/luajit2/tags</a>
<ul>
<li>imported Mike Pall's latest changes:
<ul>
<li>feature: FFI: added <code>ffi.typeinfo()</code>. thanks to Peter Colberg.</li>
<li>bugfix: fixed snapshot #0 handling for traces with a stack check on entry. this bug might lead to bad register overwrites (and eventually segmentation faults in GC upon trace exits, at least).</li>
<li>bugfix: FFI: no meta fallback when indexing pointer to incomplete struct.</li>
<li>bugfix: fixed fused constant loads under high register pressure.</li>
<li>bugfix: fixed DragonFly build (unsupported). thanks to Robin Hahling, Alex Hornung, and Joris Giovannangeli.</li>
<li>bugfix: FFI: fixed initialization of unions of subtypes. thanks to Peter Colberg.</li>
<li>bugfix: FFI: Fix for cdata vs. non-cdata arithmetic and comparisons. thanks to Roman Tsisyk.</li>
<li>optimize: eliminated hmask guard for forwarded HREFK.</li>
</ul></li>
<li>debugging: added an (expensive) assertion to check GC objects in current stack upon trace exiting. thanks Mike Pall. only enabled when building with <code>-DLUA_USE_ASSERT</code>.</li>
</ul></li>
<li>upgraded <a href="lua-nginx-module.html" tppabs="http://openresty.org/cn/lua-nginx-module.html">Lua Nginx Module</a> to 0.9.13.
<ul>
<li>optimize: reduced the pool size of a fake connection from the default pool size (16KB) to 128B, affecting <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#init_worker_by_lua%27" tppabs="https://github.com/openresty/lua-nginx-module#init_worker_by_lua">init_worker_by_lua</a> and <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#ngxtimerat%27" tppabs="https://github.com/openresty/lua-nginx-module#ngxtimerat">ngx.timer.at</a>.</li>
<li>optimize: made fake requests share their connection pools, affecting <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#init_worker_by_lua%27" tppabs="https://github.com/openresty/lua-nginx-module#init_worker_by_lua">init_worker_by_lua</a> and <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#ngxtimerat%27" tppabs="https://github.com/openresty/lua-nginx-module#ngxtimerat">ngx.timer.at</a>.</li>
<li>feature: the error logger used by ngx.timer.at handlers now outputs the &quot;client: xxx, server: xxx&quot; context info for the original (true) request creating the timer.</li>
<li>feature: added nginx configuration file names and line numbers to the rewrite/access/content/log_by_lua directives' Lua chunk names in order to simplify debugging.</li>
<li>feature: <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#ngxflush%27" tppabs="https://github.com/openresty/lua-nginx-module#ngxflush">ngx.flush(true)</a> now returns the &quot;timeout&quot; and &quot;client aborted&quot; errors to the Lua land for the cases that writing to the client is timed out or the client closes the connection prematurely, respectively.</li>
<li>feature: <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#ngxflush%27" tppabs="https://github.com/openresty/lua-nginx-module#ngxflush">ngx.flush(true)</a> can now wait on delayed events due to nginx's <a href="javascript:if(confirm(%27http://nginx.org/en/docs/http/ngx_http_core_module.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://nginx.org/en/docs/http/ngx_http_core_module.html#limit_rate%27" tppabs="http://nginx.org/en/docs/http/ngx_http_core_module.html#limit_rate">limit_rate</a> config directive or <a href="javascript:if(confirm(%27http://nginx.org/en/docs/http/ngx_http_core_module.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://nginx.org/en/docs/http/ngx_http_core_module.html#var_limit_rate%27" tppabs="http://nginx.org/en/docs/http/ngx_http_core_module.html#var_limit_rate">$limit_rate</a> variable settings. thanks Shafreeck Sea for the original patch.</li>
<li>bugfix: <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#ngxflush%27" tppabs="https://github.com/openresty/lua-nginx-module#ngxflush">ngx.flush()</a>, <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#ngxeof%27" tppabs="https://github.com/openresty/lua-nginx-module#ngxeof">ngx.eof()</a>, and some other things did not update busy/free chains after calling the output filters.</li>
<li>bugfix: ngx_gzip/ngx_gunzip module filters might cause <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#ngxflush%27" tppabs="https://github.com/openresty/lua-nginx-module#ngxflush">ngx.flush(true)</a> to hang until timeout for nginx 1.7.7+ (and some other old versions of nginx). thanks Maxim Dounin for the help.</li>
<li>bugfix: <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#ngxget_phase%27" tppabs="https://github.com/openresty/lua-nginx-module#ngxget_phase">ngx.get_phase()</a> did not work in the context of <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#init_worker_by_lua%27" tppabs="https://github.com/openresty/lua-nginx-module#init_worker_by_lua">init_worker_by_lua*</a>.</li>
<li>bugfix: use of <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#ngxflush%27" tppabs="https://github.com/openresty/lua-nginx-module#ngxflush">ngx.flush(true)</a> with the <a href="javascript:if(confirm(%27http://nginx.org/en/docs/http/ngx_http_core_module.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://nginx.org/en/docs/http/ngx_http_core_module.html#limit_rate%27" tppabs="http://nginx.org/en/docs/http/ngx_http_core_module.html#limit_rate">limit_rate</a> config directive or the <a href="javascript:if(confirm(%27http://nginx.org/en/docs/http/ngx_http_core_module.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://nginx.org/en/docs/http/ngx_http_core_module.html#var_limit_rate%27" tppabs="http://nginx.org/en/docs/http/ngx_http_core_module.html#var_limit_rate">$limit_rate</a> variable may hang the request forever for large volumn of output data. thanks Shafreeck Sea for the report.</li>
<li>bugfix: compilation error when PCRE is disabled in the nginx build. thanks Ivan Cekov for the report.</li>
<li>bugfix: when syslog was enabled in the <a href="javascript:if(confirm(%27http://nginx.org/en/docs/ngx_core_module.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://nginx.org/en/docs/ngx_core_module.html#error_log%27" tppabs="http://nginx.org/en/docs/ngx_core_module.html#error_log">error_log</a> directive for nginx 1.7.1+, use of <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#init_worker_by_lua%27" tppabs="https://github.com/openresty/lua-nginx-module#init_worker_by_lua">init_worker_by_lua</a> or <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#ngxtimerat%27" tppabs="https://github.com/openresty/lua-nginx-module#ngxtimerat">ngx.timer.at()</a> would lead to segmentation faults. thanks shun.zhang for the report.</li>
<li>bugfix: fixed compilation error with nginx 1.7.5+ because nginx 1.7.5+ changes the API in the events subsystem. thanks Charles R. Portwood II and Mathieu Le Marec for the report.</li>
<li>bugfix: <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#ngxreqraw_header%27" tppabs="https://github.com/openresty/lua-nginx-module#ngxreqraw_header">ngx.req.raw_header()</a>: buffer overflow and the &quot;buffer error&quot; exception might happen for massively pipelined downstream requests. thanks Dane Knecht for the report.</li>
<li>bugfix: <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#ngxreqraw_header%27" tppabs="https://github.com/openresty/lua-nginx-module#ngxreqraw_header">ngx.req.raw_header()</a>: we might change nginx's internal buffer pointers, which might cause bad side-effects.</li>
<li>doc: added a new section, <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#cocockets-not-available-everywhere%27" tppabs="https://github.com/openresty/lua-nginx-module#cocockets-not-available-everywhere">Cocockets Not Available Everywhere</a>, under the <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module#known-issues%27" tppabs="https://github.com/openresty/lua-nginx-module#known-issues">Known Issues</a> section.</li>
</ul></li>
<li>upgraded <a href="lua-resty-dns-library.html" tppabs="http://openresty.org/cn/lua-resty-dns-library.html">Lua Resty DNS Library</a> to 0.14.
<ul>
<li>feature: added support for the SPF record type specified by RFC 4408. thanks Tom Fitzhenry for the patch.</li>
</ul></li>
<li>upgraded <a href="lua-resty-lrucache-library.html" tppabs="http://openresty.org/cn/lua-resty-lrucache-library.html">Lua Resty Lrucache Library</a> to 0.03.
<ul>
<li>feature: the <a href="javascript:if(confirm(%27https://github.com/openresty/lua-resty-lrucache  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-resty-lrucache#get%27" tppabs="https://github.com/openresty/lua-resty-lrucache#get">get()</a> method now also returns the stale value as the second returned value if available.</li>
</ul></li>
<li>upgraded <a href="lua-resty-lock-library.html" tppabs="http://openresty.org/cn/lua-resty-lock-library.html">Lua Resty Lock Library</a> to 0.04.
<ul>
<li>bugfix: the shared dictionary would incorrectly get unref'd for multiple times when the <a href="javascript:if(confirm(%27https://github.com/openresty/lua-resty-lock  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-resty-lock#lock%27" tppabs="https://github.com/openresty/lua-resty-lock#lock">lock()</a> and/or <a href="javascript:if(confirm(%27https://github.com/openresty/lua-resty-lock  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-resty-lock#unlock%27" tppabs="https://github.com/openresty/lua-resty-lock#unlock">unlock()</a> methods are called more than once. thanks Peng Wu for the report and Dejiang Zhu for the patch.</li>
</ul></li>
<li>upgraded <a href="echo-nginx-module.html" tppabs="http://openresty.org/cn/echo-nginx-module.html">Echo Nginx Module</a> to 0.57.
<ul>
<li>bugfix: <a href="javascript:if(confirm(%27https://github.com/openresty/echo-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/echo-nginx-module#echo_client_request_headers%27" tppabs="https://github.com/openresty/echo-nginx-module#echo_client_request_headers">$echo_client_request_headers</a>: buffer overflow and the &quot;buffer error&quot; exception might happen for massively pipelined downstream requests.</li>
<li>bugfix: <a href="javascript:if(confirm(%27https://github.com/openresty/echo-nginx-module  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/echo-nginx-module#echo_client_request_headers%27" tppabs="https://github.com/openresty/echo-nginx-module#echo_client_request_headers">$echo_client_request_headers</a>: we might change nginx's internal buffer pointers, which might cause bad side-effects.</li>
</ul></li>
<li>upgraded <a href="drizzle-nginx-module.html" tppabs="http://openresty.org/cn/drizzle-nginx-module.html">Drizzle Nginx Module</a> to 0.1.8.
<ul>
<li>bugfix: fixed compilation error with nginx 1.7.5+ because nginx 1.7.5+ changes the API in the events subsystem.</li>
</ul></li>
<li>upgraded <a href="postgres-nginx-module.html" tppabs="http://openresty.org/cn/postgres-nginx-module.html">Postgres Nginx Module</a> to 1.0rc5.
<ul>
<li>bugfix: fixed compilation error with nginx 1.7.5+ because nginx 1.7.5+ changes the API in the events subsystem.</li>
</ul></li>
<li>upgraded <a href="coolkit-nginx-module.html" tppabs="http://openresty.org/cn/coolkit-nginx-module.html">Coolkit Nginx Module</a> to 0.2rc2.
<ul>
<li>bugfix: compilation failed when PCRE was disabled in the nginx build.</li>
<li>feature: added the &quot;$location&quot; variable, by Piotr Sikora.</li>
</ul></li>
<li>upgraded <a href="set-misc-nginx-module.html" tppabs="http://openresty.org/cn/set-misc-nginx-module.html">Set Misc Nginx Module</a> to 0.27.
<ul>
<li>bugfix: bugfix: fixed build failure when <code>--with-mail_ssl_module</code> is specified while <code>--with-http_ssl_module</code> is not. thanks Xiaochen Wang for the report. See <a href="changelog-1007004.html" tppabs="http://openresty.org/cn/changelog-1007004.html">ChangeLog 1.7.4</a> for change log for <a href="index.htm" tppabs="http://openresty.org/cn/openresty.html">OpenResty</a> 1.7.4.x.</li>
</ul></li>
</ul>

        </div><!-- / body -->
</div><!-- / item -->

		</section><!-- / main -->

<div class="sidebar sright">
        <div class="options">
                <!--
                <ul class="first">
                        <li><a href="#" class="close-all">close all</a></li>
                        <li><a href="#" class="permaview">permaview</a></li>
                        <li><a href="#" class="more-options">options</a></li>
                </ul> --><!-- / first -->
        </div><!-- options -->

        <div class="tabs">
                <ul class="navigation">
                        <!--
                        <li><a href="#" class="current">Timeline</a></li>
                        <li><a href="#">All</a></li>
                        <li><a href="#">Tags</a></li>
                        <li><a href="#">More</a></li>
                        -->
                        <li><span>最近更新</span></li>
                </ul><!-- / navigation -->
                <div class="panes">
                        <div class="pane" id="timeline">
                                <ul>
                                    <li>
                                            <h3>20 Mar 2016</h3>
                                            <ul>
                                                <li><a href="lua-cjson-library.html" tppabs="http://openresty.org/cn/lua-cjson-library.html">Lua Cjson Library</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>17 Mar 2016</h3>
                                            <ul>
                                                <li><a href="download.html" tppabs="http://openresty.org/cn/download.html">Download</a></li>
                                                <li><a href="changelog-1009007.html" tppabs="http://openresty.org/cn/changelog-1009007.html">ChangeLog 1.9.7</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>22 Jan 2016</h3>
                                            <ul>
                                                <li><a href="installation.html" tppabs="http://openresty.org/cn/installation.html">Installation</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>05 Jan 2016</h3>
                                            <ul>
                                                <li><a href="about.html" tppabs="http://openresty.org/cn/about.html">About</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>30 Dec 2015</h3>
                                            <ul>
                                                <li><a href="index.htm" tppabs="http://openresty.org/cn/openresty.html">OpenResty</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>25 Dec 2015</h3>
                                            <ul>
                                                <li><a href="main-menu.html" tppabs="http://openresty.org/cn/main-menu.html">Main Menu</a></li>
                                                <li><a href="changes.html" tppabs="http://openresty.org/cn/changes.html">Changes</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>23 Nov 2015</h3>
                                            <ul>
                                                <li><a href="components.html" tppabs="http://openresty.org/cn/components.html">Components</a></li>
                                                <li><a href="changelog-1009003.html" tppabs="http://openresty.org/cn/changelog-1009003.html">ChangeLog 1.9.3</a></li>
                                                <li><a href="resty-cli.html" tppabs="http://openresty.org/cn/resty-cli.html">Resty CLI</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>11 Aug 2015</h3>
                                            <ul>
                                                <li><a href="donate-online.html" tppabs="http://openresty.org/cn/donate-online.html">Donate Online</a></li>
                                                <li><a href="donors.html" tppabs="http://openresty.org/cn/donors.html">Donors</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>03 Jul 2015</h3>
                                            <ul>
                                                <li><a href="changelog-1007010.html" tppabs="http://openresty.org/cn/changelog-1007010.html">ChangeLog 1.7.10</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>04 Feb 2015</h3>
                                            <ul>
                                                <li><a href="changelog-1007007.html" tppabs="http://openresty.org/cn/changelog-1007007.html">ChangeLog 1.7.7</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>10 Oct 2014</h3>
                                            <ul>
                                                <li><a href="changelog-1007004.html" tppabs="http://openresty.org/cn/changelog-1007004.html">ChangeLog 1.7.4</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>13 Jul 2014</h3>
                                            <ul>
                                                <li><a href="changelog-1007002.html" tppabs="http://openresty.org/cn/changelog-1007002.html">ChangeLog 1.7.2</a></li>
                                            </ul>
                                    </li>
                                </ul>
                        </div><!-- / pane -->
                </div><!-- / panes -->
        </div><!-- / tabs -->
</div><!-- / sidebar right -->

	</div><!-- / wrapper -->

<div class="content-footer">
<hr class="footer-sep"/>
<div class="footer">
  <p>版权所有 © 2016 章亦春（agentzh）</p>
  <p>100% 由 OpenResty 和 PostgreSQL 驱动
     （<a href="javascript:if(confirm(%27https://github.com/openresty/openresty.org/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/openresty.org/%27" tppabs="https://github.com/openresty/openresty.org/">
     查看本站的源代码</a>）</p>
  <br/>
  <p>京ICP备16021991号</p>
</div>
</div>

<script src="jquery.min.js" tppabs="http://openresty.org/js/jquery.min.js"></script>
<script src="main.js" tppabs="http://openresty.org/js/main.js"></script>

<!-- Google analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24724965-1']);
  //_gaq.push(['_setDomainName', 'http://openresty.org/cn/openresty.org']);
  _gaq.push(['_trackPageview']);

  var ga_f = function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www/') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  };
  setTimeout(ga_f, 0);

</script>


</body>
</html>
