<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>OpenResty - ChangeLog 1.4.2</title>
	<link href="fonts.css" tppabs="https://openresty.org/css/fonts.css" rel='stylesheet' type='text/css'>
	<!--
	If you ever wanted to use LESS instead of CSS...
	<link rel="stylesheet" type="text/less" href="/css/main.less">
	<script src="/js/less.js"></script>
	-->
	<link rel="stylesheet" type="text/css" href="main.css" tppabs="http://openresty.org/css/main.css">
</head>
<body>

<header role="header">
        <p class="site-name left">
                <a href="javascript:if(confirm(%27http://openresty.org/cn/.  \n\nThis file was not retrieved by Teleport Ultra, because the server reports that this file cannot be found.  \n\nDo you want to open it from the server?%27))window.location=%27http://openresty.org/cn/.%27" tppabs="http://openresty.org/cn/.">OpenResty</a>
                <small>通过扩展 NGINX 和 Lua 实现的可伸缩的 Web 平台</small>
        </p><!-- / site-name -->

        <form action="http://openresty.org/cn/search.html" class="right">
                <fieldset>
                        <input type="search" name="query" id="search"
                               placeholder="搜索 OpenResty.org 中文站" required>
                </fieldset>
        </form>
</header>


	<div id="wrapper">
		<div class="sidebar sleft">
			<nav id="nav">
<ul>
<li><a href="index.htm" tppabs="http://openresty.org/cn/openresty.html">概览</a></li>
<li><a href="components.html" tppabs="http://openresty.org/cn/components.html">组件</a></li>
<li><a href="getting-started.html" tppabs="http://openresty.org/cn/getting-started.html">新手上路</a></li>
<li><a href="samples.html" tppabs="http://openresty.org/cn/samples.html">样例</a></li>
<li><a href="benchmark.html" tppabs="http://openresty.org/cn/benchmark.html">性能评测</a></li>
<li><a href="presentations.html" tppabs="http://openresty.org/cn/presentations.html">幻灯片</a></li>
<li><a href="ebooks.html" tppabs="http://openresty.org/cn/ebooks.html">电子图书</a></li>
<li><a href="resources.html" tppabs="http://openresty.org/cn/resources.html">资源</a></li>
<li><a href="download.html" tppabs="http://openresty.org/cn/download.html">下载</a></li>
<li><a href="installation.html" tppabs="http://openresty.org/cn/installation.html">安装</a></li>
<li><a href="changes.html" tppabs="http://openresty.org/cn/changes.html">变更历史</a></li>
<li><a href="quality-assurance.html" tppabs="http://openresty.org/cn/quality-assurance.html">测试</a></li>
<li><a href="contact-us.html" tppabs="http://openresty.org/cn/contact-us.html">联系我们</a></li>
<li><a href="javascript:if(confirm(%27https://openresty.org/survey/cn  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://openresty.org/survey/cn%27" tppabs="https://openresty.org/survey/cn">用户问卷调查</a></li>
<li><a href="donate-online.html" tppabs="http://openresty.org/cn/donate-online.html">捐助</a></li>
<li><a href="donors.html" tppabs="http://openresty.org/cn/donors.html">捐款者</a></li>
<li><a href="about.html" tppabs="http://openresty.org/cn/about.html">关于</a></li>
<li><a href="javascript:if(confirm(%27http://openresty.org/en/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://openresty.org/en/%27" tppabs="http://openresty.org/en/">English Site</a></li>
</ul>

			</nav><!-- / nav -->

<ul class="buttons">
    <!-- <li><a href="#" class="btn rss">RSS Feed</a></li> -->
    <li>
        <!-- <a href="#" class="btn paypal">Donate with PayPal</a> -->
        <form name="_xclick" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
        <input type="hidden" name="cmd" value="_xclick">
        <input type="hidden" name="business" value="agentzh@gmail.com">
        <input type="hidden" name="item_name" value="OpenResty Donation (in USD)">
        <input type="hidden" name="currency_code" value="USD">
        <input type="hidden" name="amount" value="">
        <input type="image" src="donate_paypal.gif" tppabs="http://openresty.org/images/donate_paypal.gif" border="0" name="submit" alt="Donate with PayPal">
        </form>
    </li>
</ul>


		</div><!-- / sidebar left -->
		
		<section id="main">
<div class="item">
        <header>
                <h2>ChangeLog 1.4.2</h2>
                <small>
                    <a href="yichun-zhang.html" tppabs="http://openresty.org/cn/yichun-zhang.html">
                    Yichun Zhang
                    </a>,
                    30 Sep 2013 (created 12 Aug 2013)</small>
                <div class="options">
                        <!--
                        <a href="#" class="trigger">Show Options</a>
                        <ul class="first-level">
                                <li><a href="#">close</a></li>
                                <li><a href="#">close others</a></li>
                                <li><a href="#">view</a></li>
                                <li><a href="#">fields</a></li>
                                <li><a href="#">syncing</a></li>
                                <li><a href="#">permalink</a></li>
                                <li><a href="#">references</a></li>
                                <li>
                                        <a href="#">jump</a>
                                        <ul class="second-level">
                                                <li><a href="#">Benchmark</a></li>
                                                <li><a href="#">Presentations</a></li>
                                                <li><a href="#">eBooks</a></li>
                                        </ul>
                                </li>
                        </ul>
                        -->
                </div><!-- / options -->
        </header>
        <div class="body">
<h1 id="mainline-version-1.4.2.9---29-september-2013">Mainline Version 1.4.2.9 - 29 September 2013</h1>
<ul>
<li>bundled the new <a href="lua-resty-web-socket-library.html" tppabs="http://openresty.org/cn/lua-resty-web-socket-library.html">Lua Resty Web Socket Library</a> 0.01.
<ul>
<li>this Lua library implements both a nonblocking WebSocket server and a nonblocking WebSocket client based on <a href="lua-nginx-module.html" tppabs="http://openresty.org/cn/lua-nginx-module.html">Lua Nginx Module</a>'s cosocket API. thanks Hendrik Schumacher.</li>
</ul></li>
<li>bundled the new <a href="lua-resty-lock-library.html" tppabs="http://openresty.org/cn/lua-resty-lock-library.html">Lua Resty Lock Library</a> 0.01.
<ul>
<li>this Lua library implements a simple nonblocking mutex lock API based on <a href="lua-nginx-module.html" tppabs="http://openresty.org/cn/lua-nginx-module.html">Lua Nginx Module</a>'s shared memory dictionaries. Mostly useful for eliminating &quot;dog-pile effects&quot; and etc. thanks Sri Rao for the suggestion.</li>
</ul></li>
<li>upgraded <a href="lua-resty-redis-library.html" tppabs="http://openresty.org/cn/lua-resty-redis-library.html">Lua Resty Redis Library</a> to 0.16.
<ul>
<li>feature: added new redis commands bitcount, bitop, client, dump, hincrbyfloat, incrbyfloat, migrate, pexpire, pexpireat, psetex, pubsub, pttl, restore, and time. thanks alex-yam for the patch.</li>
<li>optimize: eliminated the <a href="javascript:if(confirm(%27http://www.lua.org/manual/5.1/manual.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.lua.org/manual/5.1/manual.html#pdf-table.insert%27" tppabs="http://www.lua.org/manual/5.1/manual.html#pdf-table.insert">table.insert()</a> calls because they are slower than <code>tb[#tb + 1] = val</code>. thanks alex-yam for the patch. this gives 1.9% speed up for trivial set and get examples when <a href="luajit.html" tppabs="http://openresty.org/cn/luajit.html">LuaJIT</a> 2.0.2 is used and 4.9% speed up when <a href="luajit.html" tppabs="http://openresty.org/cn/luajit.html">LuaJIT</a>'s v2.1 git branch is used.</li>
<li>refactor: avoided using Lua 5.1's <a href="javascript:if(confirm(%27http://www.lua.org/manual/5.1/manual.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.lua.org/manual/5.1/manual.html#pdf-module%27" tppabs="http://www.lua.org/manual/5.1/manual.html#pdf-module">module() function</a> for defining our Lua modules because it has bad side effects.</li>
<li>docs: do not use 0 (i.e., unlimited) max idle time in the <a href="javascript:if(confirm(%27https://github.com/agentzh/lua-resty-redis  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/agentzh/lua-resty-redis#set_keepalive%27" tppabs="https://github.com/agentzh/lua-resty-redis#set_keepalive">set_keepalive()</a> call in the code sample.</li>
<li>docs: added code samples for the redis commands <code>hmget</code> and <code>hmset</code>. this has already become a FAQ.</li>
<li>docs: added the <a href="javascript:if(confirm(%27https://github.com/agentzh/lua-resty-redis  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/agentzh/lua-resty-redis#redis-authentication%27" tppabs="https://github.com/agentzh/lua-resty-redis#redis-authentication">Redis Authentication</a> section because it is already an FAQ.</li>
<li>docs: documented the <code>options</code> table argument for the <a href="javascript:if(confirm(%27https://github.com/agentzh/lua-resty-redis  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/agentzh/lua-resty-redis#connect%27" tppabs="https://github.com/agentzh/lua-resty-redis#connect">connect() method</a>.</li>
<li>docs: added a missing <code>local</code> keyword to the code sample. thanks Wendal Chen for the patch.</li>
</ul></li>
<li>upgraded <a href="lua-resty-memcached-library.html" tppabs="http://openresty.org/cn/lua-resty-memcached-library.html">Lua Resty Memcached Library</a> to 0.12.
<ul>
<li>optimize: no longer use Lua tables and <a href="javascript:if(confirm(%27http://www.lua.org/manual/5.1/manual.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.lua.org/manual/5.1/manual.html#pdf-table.concat%27" tppabs="http://www.lua.org/manual/5.1/manual.html#pdf-table.concat">table.concat()</a> to construct simple Memcached query strings. this gives 6.75% overall speed up for trivial <code>set</code> and <code>get</code> examples when <a href="luajit.html" tppabs="http://openresty.org/cn/luajit.html">LuaJIT</a> 2.0.2 is used.</li>
<li>optimize: eliminated <a href="javascript:if(confirm(%27http://www.lua.org/manual/5.1/manual.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.lua.org/manual/5.1/manual.html#pdf-table.insert%27" tppabs="http://www.lua.org/manual/5.1/manual.html#pdf-table.insert">table.insert()</a> because it is slower than <code>tb[#tb + 1] = val</code>.</li>
<li>refactor: avoided using Lua's <a href="javascript:if(confirm(%27http://www.lua.org/manual/5.1/manual.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.lua.org/manual/5.1/manual.html#pdf-module%27" tppabs="http://www.lua.org/manual/5.1/manual.html#pdf-module">module() function</a> for defining our Lua modules because it has bad side effects.</li>
<li>docs: use limited (10 sec) max idel timeout for in-pool connections in the code sample.</li>
</ul></li>
<li>upgraded <a href="lua-nginx-module.html" tppabs="http://openresty.org/cn/lua-nginx-module.html">Lua Nginx Module</a> to 0.9.0.
<ul>
<li>feature: added support for raw downstream cosocket via the <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.req.socket%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.req.socket">ngx.req.socket(true)</a> API, upon which http upgrading protocols like WebSocket can be implemented with pure Lua (see <a href="lua-resty-web-socket-library.html" tppabs="http://openresty.org/cn/lua-resty-web-socket-library.html">Lua Resty Web Socket Library</a>). This API can also be used to bypass the <a href="nginx.html" tppabs="http://openresty.org/cn/nginx.html">Nginx</a> output filters and emit raw HTTP response headers and/or HTTP response bodies. thanks Hendrik Schumacher and aviramc.</li>
<li>bugfix: memory invalid reads might happen when <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.flush%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.flush">ngx.flush(true)</a> was used: the &quot;ctx&quot; struct could get freed in the middle of processing and we should save the state explicitly on the C stack.</li>
<li>bugfix: the standard Lua coroutine API was not available in the context of <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#init_by_lua%27" tppabs="http://wiki.nginx.org/HttpLuaModule#init_by_lua">init_by_lua*</a> and threw out the &quot;no request found&quot; error. thanks Wolf Tivy for the report.</li>
<li>bugfix: massive compatibility fixes for the Microsoft Visual C++ compiler. thanks Edwin Cleton for the report.</li>
<li>bugfix: Lua VM might run out of memory when <code>lua_code_cache</code> is off; now we always enforce a full Lua GC cycle right after unloading most of the loaded Lua modules when the Lua code cache is turned off.</li>
<li>change: raised the &quot;lua_code_cache is off&quot; warning to an alert.</li>
</ul></li>
<li>upgraded <a href="nginx-devel-kit.html" tppabs="http://openresty.org/cn/nginx-devel-kit.html">Nginx Devel Kit</a> to 0.2.19.
<ul>
<li>bugfix: fixed warnings from the Microsoft Visual C++ compiler. thanks Edwin Cleton for the report.</li>
</ul></li>
</ul>
<h1 id="stable-version-1.4.2.8---22-september-2013">Stable Version 1.4.2.8 - 22 September 2013</h1>
<ul>
<li>upgraded <a href="lua-nginx-module.html" tppabs="http://openresty.org/cn/lua-nginx-module.html">Lua Nginx Module</a> to 0.8.10.
<ul>
<li>bugfix: we did not declare the &quot;level&quot; local variable of <code>ngx_http_lua_ngx_log</code> at the beginning of the code block. thanks Edwin Cleton for the report.</li>
<li>docs: documented more limitations in the current implementation.</li>
<li>docs: avoided using <a href="javascript:if(confirm(%27http://www.lua.org/manual/5.1/manual.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.lua.org/manual/5.1/manual.html#pdf-module%27" tppabs="http://www.lua.org/manual/5.1/manual.html#pdf-module">module()</a> and also recommended the <a href="javascript:if(confirm(%27https://github.com/agentzh/nginx-devel-utils/blob/master/lua-releng  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/agentzh/nginx-devel-utils/blob/master/lua-releng%27" tppabs="https://github.com/agentzh/nginx-devel-utils/blob/master/lua-releng">lua-releng tool</a> to locate misuse of Lua globals. The following components are bundled in this release:</li>
</ul></li>
<li>LuaJIT-2.0.2</li>
<li>array-var-nginx-module-0.03rc1</li>
<li>auth-request-nginx-module-0.2</li>
<li>drizzle-nginx-module-0.1.6</li>
<li>echo-nginx-module-0.48</li>
<li>encrypted-session-nginx-module-0.03</li>
<li>form-input-nginx-module-0.07</li>
<li>headers-more-nginx-module-0.22</li>
<li>iconv-nginx-module-0.10</li>
<li>lua-5.1.5</li>
<li>lua-cjson-1.0.3</li>
<li>lua-rds-parser-0.05</li>
<li>lua-redis-parser-0.10</li>
<li>lua-resty-dns-0.10</li>
<li>lua-resty-memcached-0.11</li>
<li>lua-resty-mysql-0.13</li>
<li>lua-resty-redis-0.15</li>
<li>lua-resty-string-0.08</li>
<li>lua-resty-upload-0.08</li>
<li>memc-nginx-module-0.13</li>
<li>nginx-1.4.2</li>
<li>ngx_coolkit-0.2rc1</li>
<li>ngx_devel_kit-0.2.18</li>
<li>ngx_lua-0.8.10</li>
<li>ngx_postgres-1.0rc3</li>
<li>rds-csv-nginx-module-0.05rc2</li>
<li>rds-json-nginx-module-0.12rc10</li>
<li>redis-nginx-module-0.3.6</li>
<li>redis2-nginx-module-0.10</li>
<li>set-misc-nginx-module-0.22</li>
<li>srcache-nginx-module-0.22</li>
<li>xss-nginx-module-0.03rc9</li>
</ul>
<h1 id="mainline-version-1.4.2.7---15-september-2013">Mainline Version 1.4.2.7 - 15 September 2013</h1>
<ul>
<li>upgraded <a href="lua-nginx-module.html" tppabs="http://openresty.org/cn/lua-nginx-module.html">Lua Nginx Module</a> to 0.8.9.
<ul>
<li>bugfix: the <a href="nginx.html" tppabs="http://openresty.org/cn/nginx.html">Nginx</a> core does not send a default status line for the 101 status code. now we construct one ourselves in this case.</li>
<li>bugfix: nil &quot;pool&quot; option values led to errors in <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#tcpsock:connect%27" tppabs="http://wiki.nginx.org/HttpLuaModule#tcpsock:connect">tcpsock:connect()</a>.</li>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#tcpsock:receive%27" tppabs="http://wiki.nginx.org/HttpLuaModule#tcpsock:receive">tcpsock:receive(0)</a> could hang until new data arrived or the timeout error happened; now it always returns an empty string immediately. this new behaviour diverges from the <a href="javascript:if(confirm(%27http://w3.impa.br/~diego/software/luasocket/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://w3.impa.br/~diego/software/luasocket/%27" tppabs="http://w3.impa.br/~diego/software/luasocket/">LuaSocket library</a> though.</li>
<li>bugfix: for SPDY requests, we (temporarily) disable the Lua API functions <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.location.capture%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.location.capture">ngx.location.capture</a>, <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.location.capture_multi%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.location.capture_multi">ngx.location.capture_multi</a>, and <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.req.socket%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.req.socket">ngx.req.socket</a>, which are known to have problems in SPDY mode. The SPDY compatibility issue will eventually get fixed in the near future.</li>
<li>refactor: removed our own <code>ctx-&gt;headers_sent</code> field because we should use <a href="nginx.html" tppabs="http://openresty.org/cn/nginx.html">Nginx</a> core's <code>r-&gt;header_sent</code> instead.</li>
</ul></li>
<li>upgraded <a href="echo-nginx-module.html" tppabs="http://openresty.org/cn/echo-nginx-module.html">Echo Nginx Module</a> to 0.48.
<ul>
<li>refactor: removed our own <code>ctx-&gt;headers_sent</code> field because we should use <a href="nginx.html" tppabs="http://openresty.org/cn/nginx.html">Nginx</a> core's <code>r-&gt;header_sent</code> instead.</li>
</ul></li>
<li>bugfix: <code>./configure</code> now always removes existing Makefile before trying to generate a new one.</li>
</ul>
<h1 id="mainline-version-1.4.2.5---8-september-2013">Mainline Version 1.4.2.5 - 8 September 2013</h1>
<ul>
<li>upgraded <a href="set-misc-nginx-module.html" tppabs="http://openresty.org/cn/set-misc-nginx-module.html">Set Misc Nginx Module</a> to 0.22.
<ul>
<li>bugfix: we did not escape <code>\0</code>, <code>\z</code>, <code>\b</code>, and <code>\t</code> properly in set_quote_sql_str according to the MySQL quoting rules. thanks Siddon Tang for the report.</li>
</ul></li>
<li>upgraded <a href="lua-nginx-module.html" tppabs="http://openresty.org/cn/lua-nginx-module.html">Lua Nginx Module</a> to 0.8.8.
<ul>
<li>feature: added new option &quot;always_forward_body&quot; to <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.location.capture%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.location.capture">ngx.location.capture()</a> and <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.location.capture_multi%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.location.capture_multi">ngx.location.capture_multi()</a>, which controls whether to always forward the parent request's request body to the subrequest (even when the subrequest is not of the POST or PUT request method). thanks Matthieu Tourne for the request.</li>
<li>feature: now timeout errors in <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#tcpsock:receive%27" tppabs="http://wiki.nginx.org/HttpLuaModule#tcpsock:receive">tcpsock:receive()</a> and <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#tcpsock:receiveuntil%27" tppabs="http://wiki.nginx.org/HttpLuaModule#tcpsock:receiveuntil">tcpsock:receiveuntil()</a> no longer automatically close the current cosocket object (for both upstream and downstream connections). thanks Aviram Cohen for the original patch.</li>
<li>bugfix: we did not escape <code>\0</code>, <code>\z</code>, <code>\t</code>, and <code>\b</code> properly in <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.quote_sql_str%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.quote_sql_str">ngx.quote_sql_str()</a>. thanks Siddon Tang for the report.</li>
<li>bugfix: Lua backtrace dumps upon uncaught Lua exceptions did not work with the standard Lua 5.1 interpreter when the backtrace was deeper than 22 levels.</li>
<li>change: now we just dump the top 22 levels in the backtrace for uncaught Lua exceptions for the sake of simplicity.</li>
<li>change: we now limit the number of nested coroutines in the backtrace dump for uncaught Lua exceptions by 5.</li>
<li>optimize: grouped the Lua string concatenation operations when constructing the backtrace string for uncaught Lua exceptions.</li>
</ul></li>
</ul>
<h1 id="mainline-version-1.4.2.3---2-september-2013">Mainline Version 1.4.2.3 - 2 September 2013</h1>
<ul>
<li>upgraded <a href="lua-nginx-module.html" tppabs="http://openresty.org/cn/lua-nginx-module.html">Lua Nginx Module</a> to 0.8.7.
<ul>
<li>feature: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#log_by_lua%27" tppabs="http://wiki.nginx.org/HttpLuaModule#log_by_lua">log_by_lua*</a> now always runs before the standard <a href="javascript:if(confirm(%27http://nginx.org/en/docs/http/ngx_http_log_module.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://nginx.org/en/docs/http/ngx_http_log_module.html%27" tppabs="http://nginx.org/en/docs/http/ngx_http_log_module.html">ngx_http_log_module</a> (for access logging). thanks Calin Don for the suggestion.</li>
<li>feature: added new API <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.config.debug%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.config.debug">ngx.config.debug</a> to indicate whether this is a debug build of <a href="nginx.html" tppabs="http://openresty.org/cn/nginx.html">Nginx</a> (that is, being built by the <code>./configure</code> option <code>--with-debug</code>).</li>
<li>bugfix: the global Lua state's <code>_G</code> table was cleared when <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#lua_code_cache%27" tppabs="http://wiki.nginx.org/HttpLuaModule#lua_code_cache">lua_code_cache</a> was off, which could confuse the setup in <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#init_by_lua%27" tppabs="http://wiki.nginx.org/HttpLuaModule#init_by_lua">init_by_lua*</a>. thanks Robert Andrew Ditthardt for the report.</li>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.flush%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.flush">ngx.flush()</a> triggered response header sending when the header was not sent yet. now it just returned the error string &quot;nothing to flush&quot; for this case. thanks linbo liao for the report.</li>
<li>bugfix: when a Lua line comment was used in the last line of the inlined Lua code chunk, a bogus Lua syntax error would be thrown.</li>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.exit%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.exit">ngx.exit</a>(204) could try to send the response header twice. <a href="nginx.html" tppabs="http://openresty.org/cn/nginx.html">Nginx</a> 1.5.4 caught this issue.</li>
<li>bugfix: the error message for failures in loading inlined Lua code was misleading.</li>
</ul></li>
<li>upgraded <a href="echo-nginx-module.html" tppabs="http://openresty.org/cn/echo-nginx-module.html">Echo Nginx Module</a> to 0.47.
<ul>
<li>bugfix: use of C global variables at configuration time could lead to issues when HUP reload failed in the middle.</li>
<li>bugfix: we might send the response header twice when an error happens. this issue is exposed by <a href="nginx.html" tppabs="http://openresty.org/cn/nginx.html">Nginx</a> 1.5.4. thanks Markus Linnala for the report.</li>
</ul></li>
<li>upgraded <a href="drizzle-nginx-module.html" tppabs="http://openresty.org/cn/drizzle-nginx-module.html">Drizzle Nginx Module</a> to 0.1.6.
<ul>
<li>bugfix: compilation error happened with nginx 1.5.3+ because <a href="nginx.html" tppabs="http://openresty.org/cn/nginx.html">Nginx</a> changes the <code>ngx_sock_ntop</code> API.</li>
<li>docs: typo fixes from smallfish.</li>
</ul></li>
<li>upgraded <a href="memc-nginx-module.html" tppabs="http://openresty.org/cn/memc-nginx-module.html">Memc Nginx Module</a> to 0.13.
<ul>
<li>bugfix: fixed compatibility issues with the new upstream C API in <a href="nginx.html" tppabs="http://openresty.org/cn/nginx.html">Nginx</a> 1.5.3+. thanks Markus Linnala for the patch.</li>
<li>bugfix: use of C global variables at configuration time could cause issues when HUP reload failed in the middle.</li>
<li>docs: now we recommend <a href="lua-resty-memcached-library.html" tppabs="http://openresty.org/cn/lua-resty-memcached-library.html">Lua Resty Memcached Library</a> instead when being used with <a href="lua-nginx-module.html" tppabs="http://openresty.org/cn/lua-nginx-module.html">Lua Nginx Module</a>.</li>
</ul></li>
<li>applied the <a href="javascript:if(confirm(%27https://github.com/agentzh/ngx_openresty/blob/master/patches/nginx-1.4.2-unix_socket_accept_over_read.patch  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/agentzh/ngx_openresty/blob/master/patches/nginx-1.4.2-unix_socket_accept_over_read.patch%27" tppabs="https://github.com/agentzh/ngx_openresty/blob/master/patches/nginx-1.4.2-unix_socket_accept_over_read.patch">unix_socket_accept_over_read patch</a> the <a href="nginx.html" tppabs="http://openresty.org/cn/nginx.html">Nginx</a> core to fix a memory over-read issue when <a href="nginx.html" tppabs="http://openresty.org/cn/nginx.html">Nginx</a> was accepting a unix domain socket.</li>
</ul>
<h1 id="mainline-version-1.4.2.1---11-august-2013">Mainline Version 1.4.2.1 - 11 August 2013</h1>
<ul>
<li>upgraded the <a href="nginx.html" tppabs="http://openresty.org/cn/nginx.html">Nginx</a> core to 1.4.2.
<ul>
<li>see <a href="javascript:if(confirm(%27http://nginx.org/en/CHANGES-1.4  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://nginx.org/en/CHANGES-1.4%27" tppabs="http://nginx.org/en/CHANGES-1.4" class="uri">http://nginx.org/en/CHANGES-1.4</a> for changes.</li>
</ul></li>
<li>upgraded <a href="lua-resty-dns-library.html" tppabs="http://openresty.org/cn/lua-resty-dns-library.html">Lua Resty DNS Library</a> to 0.10.
<ul>
<li>feature: now we return all the answer records even when the DNS server returns a non-zero error code, in which case the error code and error string are now set as the &quot;errcode&quot; and &quot;errstr&quot; fields in the Lua table returned. thanks Matthieu Tourne for requesting this. See <a href="changelog-1004001.html" tppabs="http://openresty.org/cn/changelog-1004001.html">ChangeLog 1.4.1</a> for change log for <a href="index.htm" tppabs="http://openresty.org/cn/openresty.html">OpenResty</a> 1.4.1.x.</li>
</ul></li>
</ul>

        </div><!-- / body -->
</div><!-- / item -->

		</section><!-- / main -->

<div class="sidebar sright">
        <div class="options">
                <!--
                <ul class="first">
                        <li><a href="#" class="close-all">close all</a></li>
                        <li><a href="#" class="permaview">permaview</a></li>
                        <li><a href="#" class="more-options">options</a></li>
                </ul> --><!-- / first -->
        </div><!-- options -->

        <div class="tabs">
                <ul class="navigation">
                        <!--
                        <li><a href="#" class="current">Timeline</a></li>
                        <li><a href="#">All</a></li>
                        <li><a href="#">Tags</a></li>
                        <li><a href="#">More</a></li>
                        -->
                        <li><span>最近更新</span></li>
                </ul><!-- / navigation -->
                <div class="panes">
                        <div class="pane" id="timeline">
                                <ul>
                                    <li>
                                            <h3>20 Mar 2016</h3>
                                            <ul>
                                                <li><a href="lua-cjson-library.html" tppabs="http://openresty.org/cn/lua-cjson-library.html">Lua Cjson Library</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>17 Mar 2016</h3>
                                            <ul>
                                                <li><a href="download.html" tppabs="http://openresty.org/cn/download.html">Download</a></li>
                                                <li><a href="changelog-1009007.html" tppabs="http://openresty.org/cn/changelog-1009007.html">ChangeLog 1.9.7</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>22 Jan 2016</h3>
                                            <ul>
                                                <li><a href="installation.html" tppabs="http://openresty.org/cn/installation.html">Installation</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>05 Jan 2016</h3>
                                            <ul>
                                                <li><a href="about.html" tppabs="http://openresty.org/cn/about.html">About</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>30 Dec 2015</h3>
                                            <ul>
                                                <li><a href="index.htm" tppabs="http://openresty.org/cn/openresty.html">OpenResty</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>25 Dec 2015</h3>
                                            <ul>
                                                <li><a href="main-menu.html" tppabs="http://openresty.org/cn/main-menu.html">Main Menu</a></li>
                                                <li><a href="changes.html" tppabs="http://openresty.org/cn/changes.html">Changes</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>23 Nov 2015</h3>
                                            <ul>
                                                <li><a href="components.html" tppabs="http://openresty.org/cn/components.html">Components</a></li>
                                                <li><a href="changelog-1009003.html" tppabs="http://openresty.org/cn/changelog-1009003.html">ChangeLog 1.9.3</a></li>
                                                <li><a href="resty-cli.html" tppabs="http://openresty.org/cn/resty-cli.html">Resty CLI</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>11 Aug 2015</h3>
                                            <ul>
                                                <li><a href="donate-online.html" tppabs="http://openresty.org/cn/donate-online.html">Donate Online</a></li>
                                                <li><a href="donors.html" tppabs="http://openresty.org/cn/donors.html">Donors</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>03 Jul 2015</h3>
                                            <ul>
                                                <li><a href="changelog-1007010.html" tppabs="http://openresty.org/cn/changelog-1007010.html">ChangeLog 1.7.10</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>04 Feb 2015</h3>
                                            <ul>
                                                <li><a href="changelog-1007007.html" tppabs="http://openresty.org/cn/changelog-1007007.html">ChangeLog 1.7.7</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>10 Oct 2014</h3>
                                            <ul>
                                                <li><a href="changelog-1007004.html" tppabs="http://openresty.org/cn/changelog-1007004.html">ChangeLog 1.7.4</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>13 Jul 2014</h3>
                                            <ul>
                                                <li><a href="changelog-1007002.html" tppabs="http://openresty.org/cn/changelog-1007002.html">ChangeLog 1.7.2</a></li>
                                            </ul>
                                    </li>
                                </ul>
                        </div><!-- / pane -->
                </div><!-- / panes -->
        </div><!-- / tabs -->
</div><!-- / sidebar right -->

	</div><!-- / wrapper -->

<div class="content-footer">
<hr class="footer-sep"/>
<div class="footer">
  <p>版权所有 © 2016 章亦春（agentzh）</p>
  <p>100% 由 OpenResty 和 PostgreSQL 驱动
     （<a href="javascript:if(confirm(%27https://github.com/openresty/openresty.org/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/openresty.org/%27" tppabs="https://github.com/openresty/openresty.org/">
     查看本站的源代码</a>）</p>
  <br/>
  <p>京ICP备16021991号</p>
</div>
</div>

<script src="jquery.min.js" tppabs="http://openresty.org/js/jquery.min.js"></script>
<script src="main.js" tppabs="http://openresty.org/js/main.js"></script>

<!-- Google analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24724965-1']);
  //_gaq.push(['_setDomainName', 'http://openresty.org/cn/openresty.org']);
  _gaq.push(['_trackPageview']);

  var ga_f = function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www/') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  };
  setTimeout(ga_f, 0);

</script>


</body>
</html>
