<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>OpenResty - Installation</title>
	<link href="fonts.css" tppabs="https://openresty.org/css/fonts.css" rel='stylesheet' type='text/css'>
	<!--
	If you ever wanted to use LESS instead of CSS...
	<link rel="stylesheet" type="text/less" href="/css/main.less">
	<script src="/js/less.js"></script>
	-->
	<link rel="stylesheet" type="text/css" href="main.css" tppabs="http://openresty.org/css/main.css">
</head>
<body>

<header role="header">
        <p class="site-name left">
                <a href="javascript:if(confirm(%27http://openresty.org/en/.  \n\nThis file was not retrieved by Teleport Ultra, because the server reports that this file cannot be found.  \n\nDo you want to open it from the server?%27))window.location=%27http://openresty.org/en/.%27" tppabs="http://openresty.org/en/.">OpenResty</a>
                <small>Scalable Web Platform by Extending NGINX with Lua</small>
        </p><!-- / site-name -->

        <form action="http://openresty.org/en/search.html" class="right">
                <fieldset>
                        <input type="search" name="query" id="search"
                               placeholder="Search OpenResty.org" required>
                </fieldset>
        </form>
</header>


	<div id="wrapper">
		<div class="sidebar sleft">
			<nav id="nav">
<ul>
<li><a href="getting-started.html" tppabs="http://openresty.org/en/getting-started.html">Getting Started</a></li>
<li><a href="download.html" tppabs="http://openresty.org/en/download.html">Download</a></li>
<li><a href="installation.html" tppabs="http://openresty.org/en/installation.html">Installation</a></li>
<li><a href="upgrading.html" tppabs="http://openresty.org/en/upgrading.html">Upgrading</a></li>
<li><a href="changes.html" tppabs="http://openresty.org/en/changes.html">Changes</a></li>
<li><a href="components.html" tppabs="http://openresty.org/en/components.html">Components</a></li>
<li><a href="community.html" tppabs="http://openresty.org/en/community.html">Community</a></li>
<li><a href="benchmark.html" tppabs="http://openresty.org/en/benchmark.html">Benchmark</a></li>
<li><a href="contact-us.html" tppabs="http://openresty.org/en/contact-us.html">Contact us</a></li>
<li><a href="debugging.html" tppabs="http://openresty.org/en/debugging.html">Debugging</a></li>
<li><a href="donate-online.html" tppabs="http://openresty.org/en/donate-online.html">Donate Online</a></li>
<li><a href="donors.html" tppabs="http://openresty.org/en/donors.html">Donors</a></li>
<li><a href="ebooks.html" tppabs="http://openresty.org/en/ebooks.html">eBooks</a></li>
<li><a href="faq.html" tppabs="http://openresty.org/en/faq.html">FAQ</a></li>
<li><a href="getting-involved.html" tppabs="http://openresty.org/en/getting-involved.html">Getting Involved</a></li>
<li><a href="presentations.html" tppabs="http://openresty.org/en/presentations.html">Presentations</a></li>
<li><a href="profiling.html" tppabs="http://openresty.org/en/profiling.html">Profiling</a></li>
<li><a href="quality-assurance.html" tppabs="http://openresty.org/en/quality-assurance.html">Quality Assurance</a></li>
<li><a href="resources.html" tppabs="http://openresty.org/en/resources.html">Resources</a></li>
<li><a href="samples.html" tppabs="http://openresty.org/en/samples.html">Samples</a></li>
<li><a href="javascript:if(confirm(%27https://openresty.org/survey/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://openresty.org/survey/%27" tppabs="https://openresty.org/survey/">User Survey</a></li>
<li><a href="about.html" tppabs="http://openresty.org/en/about.html">About</a></li>
<li><a href="javascript:if(confirm(%27http://openresty.org/cn/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://openresty.org/cn/%27" tppabs="http://openresty.org/cn/">中文站</a></li>
</ul>

			</nav><!-- / nav -->

<ul class="buttons">
    <!-- <li><a href="#" class="btn rss">RSS Feed</a></li> -->
    <li>
        <!-- <a href="#" class="btn paypal">Donate with PayPal</a> -->
        <form name="_xclick" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
        <input type="hidden" name="cmd" value="_xclick">
        <input type="hidden" name="business" value="agentzh@gmail.com">
        <input type="hidden" name="item_name" value="OpenResty Donation (in USD)">
        <input type="hidden" name="currency_code" value="USD">
        <input type="hidden" name="amount" value="">
        <input type="image" src="donate_paypal.gif" tppabs="http://openresty.org/images/donate_paypal.gif" border="0" name="submit" alt="Donate with PayPal">
        </form>
    </li>
</ul>


		</div><!-- / sidebar left -->
		
		<section id="main">
<div class="item">
        <header>
                <h2>Installation</h2>
                <small>
                    
                    Yichun Zhang (agentzh)
                    ,
                    25 Mar 2016 (created 21 Jun 2011)</small>
                <div class="options">
                        <!--
                        <a href="#" class="trigger">Show Options</a>
                        <ul class="first-level">
                                <li><a href="#">close</a></li>
                                <li><a href="#">close others</a></li>
                                <li><a href="#">view</a></li>
                                <li><a href="#">fields</a></li>
                                <li><a href="#">syncing</a></li>
                                <li><a href="#">permalink</a></li>
                                <li><a href="#">references</a></li>
                                <li>
                                        <a href="#">jump</a>
                                        <ul class="second-level">
                                                <li><a href="#">Benchmark</a></li>
                                                <li><a href="#">Presentations</a></li>
                                                <li><a href="#">eBooks</a></li>
                                        </ul>
                                </li>
                        </ul>
                        -->
                </div><!-- / options -->
        </header>
        <div class="body">
<p>If you haven't downloaded the <a href="index.htm" tppabs="http://openresty.org/en/openresty.html">OpenResty</a> source code tarball, please go to the <a href="download.html" tppabs="http://openresty.org/en/download.html">Download</a> page first.</p>
<p>(If you are on Windows, then you should check out <a href="javascript:if(confirm(%27https://github.com/openresty/openresty/blob/master/doc/README-win32.md  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/openresty/blob/master/doc/README-win32.md#readme%27" tppabs="https://github.com/openresty/openresty/blob/master/doc/README-win32.md#readme">this documentation</a> instead.)</p>
<p>Basically, building and installing <a href="index.htm" tppabs="http://openresty.org/en/openresty.html">OpenResty</a> is as simple as</p>
<pre><code>tar xvf ngx_openresty-VERSION.tar.gz
cd ngx_openresty-VERSION/
./configure
make
make install</code></pre>
<p>where <code>VERSION</code> should be replaced by a concrete version number of <a href="index.htm" tppabs="http://openresty.org/en/openresty.html">OpenResty</a>, like <code>0.8.54.6</code>.</p>
<p>If your system environment is modern enough, then you almost always want to enable the PCRE JIT support and IPv6 support in your NGINX by passing the <code>--with-pcre-jit</code> and <code>--with-ipv6</code> options to the <code>./configure</code> script.</p>
<p>By default, OpenResty is installed into the prefix <code>/usr/local/openresty/</code>.</p>
<p>Finally, you need to add the command-line utilities provided by OpenResty to your <code>PATH</code> environment, as in</p>
<pre><code>export PATH=/usr/local/openresty/bin:/usr/local/openresty/nginx/sbin:$PATH</code></pre>
<p>if you are using bash. Better add this line to your shell's startup script, like <code>~/.bashrc</code> or <code>~/.bash_profile</code>.</p>
<p>If you have problems while building or want finer control over the building process, please read on.</p>
<h1 id="prerequisites">Prerequisites</h1>
<p>You should have <code>perl 5.6.1+</code>, <code>libreadline</code>, <code>libpcre</code>, <code>libssl</code> installed into your system. For Linux, you should also ensure that <code>ldconfig</code> is in your PATH environment.</p>
<h2 id="debian-and-ubuntu-users">Debian and Ubuntu users</h2>
<p>You're recommended to install the following packages using apt-get:</p>
<pre><code>apt-get install libreadline-dev libncurses5-dev libpcre3-dev \
    libssl-dev perl make build-essential</code></pre>
<h2 id="fedora-and-redhat-users">Fedora and RedHat users</h2>
<p>You're recommended to install the following packages using yum:</p>
<pre><code>yum install readline-devel pcre-devel openssl-devel gcc</code></pre>
<h2 id="mac-os-x-darwin-users">Mac OS X (Darwin) users</h2>
<p>You're recommended to install prerequisites PCRE and OpenSSL using some package management tool, like <a href="javascript:if(confirm(%27http://mxcl.github.com/homebrew/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://mxcl.github.com/homebrew/%27" tppabs="http://mxcl.github.com/homebrew/">Homebrew</a>:</p>
<pre><code>brew update
brew install pcre openssl</code></pre>
<p>Alternatively you can install PCRE and/or OpenSSL from source all by yourself :)</p>
<p>After installing PCRE and OpenSSL, you may need to specify the paths for their headers and libraries to your C compiler and linker, for example,</p>
<pre><code>$ ./configure \
   --with-cc-opt=&quot;-I/usr/local/opt/openssl/include/ -I/usr/local/opt/pcre/include/&quot; \
   --with-ld-opt=&quot;-L/usr/local/opt/openssl/lib/ -L/usr/local/opt/pcre/lib/&quot; \
   -j8</code></pre>
<p>assuming that your PCRE and OpenSSL are installed under the prefix <code>/usr/local/opt/</code> which is the default for homebrew.</p>
<p>See also <a href="javascript:if(confirm(%27https://github.com/agentzh/ngx_openresty/issues/3  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/agentzh/ngx_openresty/issues/3%27" tppabs="https://github.com/agentzh/ngx_openresty/issues/3">Issue #3</a>.</p>
<h2 id="freebsd-users">FreeBSD users</h2>
<p>You need to install the following ports:</p>
<ul>
<li>devel/gmake</li>
<li>security/openssl</li>
<li>devel/pcre</li>
</ul>
<h2 id="solaris-11-users">Solaris 11 users</h2>
<p>You need to install the following packages from the official repository:</p>
<ul>
<li>gcc-3</li>
<li>SUNWlibm Usually it's just as simple as</li>
</ul>
<pre><code>pfexec pkg install gcc-3 SUNWlibm</code></pre>
<h1 id="build-openresty">Build OpenResty</h1>
<h2 id="download"><a href="download.html" tppabs="http://openresty.org/en/download.html">Download</a></h2>
<p>download the latest ngx_openresty tarball can be fetched from the <a href="download.html" tppabs="http://openresty.org/en/download.html">Download</a> page and unpack it like this:</p>
<pre><code>tar xzvf ngx_openresty-VERSION.tar.gz</code></pre>
<p>where <code>VERSION</code> should be replaced by real version numbers like <code>0.8.54.6</code>.</p>
<h2 id="configure">./configure</h2>
<p>Then enter the <code>ngx_openresty-VERSION/</code> directory, and type the following command to configure:</p>
<pre><code>./configure</code></pre>
<p>By default, <code>--prefix=/usr/local/openresty</code> is assumed. You should only disable <a href="luajit.html" tppabs="http://openresty.org/en/luajit.html">LuaJIT</a> 2 when your platform does not support <a href="luajit.html" tppabs="http://openresty.org/en/luajit.html">LuaJIT</a>.</p>
<p>You can specify various options, as in</p>
<pre><code>./configure --prefix=/opt/openresty \
            --with-pcre-jit \
            --with-ipv6 \
            --without-http_redis2_module \
            --with-http_iconv_module \
            --with-http_postgres_module \
            -j2</code></pre>
<p>All of the standard <a href="nginx.html" tppabs="http://openresty.org/en/nginx.html">Nginx</a> configure file options can be used here, including <code>--add-module=PATH</code> for adding your own 3rd-party <a href="nginx.html" tppabs="http://openresty.org/en/nginx.html">Nginx</a> C modules. Try <code>./configure --help</code> to see more options available.</p>
<p>Errors in running the ./configure script can be found in the file <code>build/nginx-VERSION/objs/autoconf.err</code> where <code>VERSION</code> should be replaced by a concrete version number of <a href="index.htm" tppabs="http://openresty.org/en/openresty.html">OpenResty</a>, like <code>0.8.54.6</code>.</p>
<h3 id="notes-for-solaris-users">Notes for Solaris users</h3>
<p>For Solaris, it's common to install libraries like OpenSSL to <code>/lib</code>, so when it complaints about missing OpenSSL and you have indeed already installed it, specify the <code>--with-ld-opt='-L/lib'</code> option.</p>
<h2 id="make">make</h2>
<p>Now you can compile everything up using the command</p>
<pre><code>make</code></pre>
<p>If your machine has multiple cores and your <code>make</code> supports the jobserver feature, you can compile things in parallel like this:</p>
<pre><code>make -j2</code></pre>
<p>assuming you have 2 CPU cores.</p>
<h2 id="make-install">make install</h2>
<p>If all the previous steps go without problems, you can install <a href="index.htm" tppabs="http://openresty.org/en/openresty.html">OpenResty</a> into your system by typing the command</p>
<pre><code>make install</code></pre>
<p>On Linux, it often requires <code>sudo</code> to gain root access.</p>
<p>If you prefer building the OpenSSL and PCRE dependencies from their source tarballs, then you could follow the commands below (you may want to change the version number accordingly):</p>
<pre><code>wget https://www.openssl.org/source/openssl-1.0.2f.tar.gz
tar -zvxf openssl-1.0.2f.tar.gz

wget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.38.tar.gz
tar -xvf pcre-8.38.tar.gz

wget https://openresty.org/download/openresty-1.9.7.3.tar.gz
tar -zxvf openresty-1.9.7.3.tar.gz
cd openresty-1.9.7.3/

# assuming your have 4 spare logical CPU cores
./configure --with-openssl=../openssl-1.0.2f \
                 --with-pcre=../pcre-8.38 -j4
make -j4
sudo make install</code></pre>

        </div><!-- / body -->
</div><!-- / item -->

		</section><!-- / main -->

<div class="sidebar sright">
        <div class="options">
                <!--
                <ul class="first">
                        <li><a href="#" class="close-all">close all</a></li>
                        <li><a href="#" class="permaview">permaview</a></li>
                        <li><a href="#" class="more-options">options</a></li>
                </ul> --><!-- / first -->
        </div><!-- options -->

        <div class="tabs">
                <ul class="navigation">
                        <!--
                        <li><a href="#" class="current">Timeline</a></li>
                        <li><a href="#">All</a></li>
                        <li><a href="#">Tags</a></li>
                        <li><a href="#">More</a></li>
                        -->
                        <li><span>Timeline</span></li>
                </ul><!-- / navigation -->
                <div class="panes">
                        <div class="pane" id="timeline">
                                <ul>
                                    <li>
                                            <h3>26 May 2016</h3>
                                            <ul>
                                                <li><a href="donors.html" tppabs="http://openresty.org/en/donors.html">Donors</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>11 Apr 2016</h3>
                                            <ul>
                                                <li><a href="using-luarocks.html" tppabs="http://openresty.org/en/using-luarocks.html">Using LuaRocks</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>31 Mar 2016</h3>
                                            <ul>
                                                <li><a href="lua-nginx-module.html" tppabs="http://openresty.org/en/lua-nginx-module.html">Lua Nginx Module</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>25 Mar 2016</h3>
                                            <ul>
                                                <li><a href="installation.html" tppabs="http://openresty.org/en/installation.html">Installation</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>23 Mar 2016</h3>
                                            <ul>
                                                <li><a href="index.htm" tppabs="http://openresty.org/en/openresty.html">OpenResty</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>20 Mar 2016</h3>
                                            <ul>
                                                <li><a href="lua-cjson-library.html" tppabs="http://openresty.org/en/lua-cjson-library.html">Lua Cjson Library</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>17 Mar 2016</h3>
                                            <ul>
                                                <li><a href="download.html" tppabs="http://openresty.org/en/download.html">Download</a></li>
                                                <li><a href="changelog-1009007.html" tppabs="http://openresty.org/en/changelog-1009007.html">ChangeLog 1.9.7</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>08 Mar 2016</h3>
                                            <ul>
                                                <li><a href="presentations.html" tppabs="http://openresty.org/en/presentations.html">Presentations</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>29 Dec 2015</h3>
                                            <ul>
                                                <li><a href="contact-us.html" tppabs="http://openresty.org/en/contact-us.html">Contact Us</a></li>
                                                <li><a href="donate-online.html" tppabs="http://openresty.org/en/donate-online.html">Donate Online</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>27 Dec 2015</h3>
                                            <ul>
                                                <li><a href="resources.html" tppabs="http://openresty.org/en/resources.html">Resources</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>21 Dec 2015</h3>
                                            <ul>
                                                <li><a href="main-menu.html" tppabs="http://openresty.org/en/main-menu.html">Main Menu</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>20 Dec 2015</h3>
                                            <ul>
                                                <li><a href="changes.html" tppabs="http://openresty.org/en/changes.html">Changes</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>23 Nov 2015</h3>
                                            <ul>
                                                <li><a href="components.html" tppabs="http://openresty.org/en/components.html">Components</a></li>
                                                <li><a href="changelog-1009003.html" tppabs="http://openresty.org/en/changelog-1009003.html">ChangeLog 1.9.3</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>31 Jul 2015</h3>
                                            <ul>
                                                <li><a href="faq.html" tppabs="http://openresty.org/en/faq.html">Frequently Asked Questions</a></li>
                                            </ul>
                                    </li>
                                </ul>
                        </div><!-- / pane -->
                </div><!-- / panes -->
        </div><!-- / tabs -->
</div><!-- / sidebar right -->

	</div><!-- / wrapper -->

<div class="content-footer">
<hr class="footer-sep"/>
<div class="footer">
  <p>Copyright © 2016 Yichun Zhang (agentzh)</p>
  <p>100% Powered by OpenResty and PostgreSQL
     (<a href="javascript:if(confirm(%27https://github.com/openresty/openresty.org/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/openresty.org/%27" tppabs="https://github.com/openresty/openresty.org/">
     view the source code of this site</a>)</p>
  <br/>
  <p>京ICP备16021991号</p>
</div>
</div>

<script src="jquery.min.js" tppabs="http://openresty.org/js/jquery.min.js"></script>
<script src="main.js" tppabs="http://openresty.org/js/main.js"></script>

<!-- Google analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24724965-1']);
  //_gaq.push(['_setDomainName', 'http://openresty.org/en/openresty.org']);
  _gaq.push(['_trackPageview']);

  var ga_f = function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www/') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  };
  setTimeout(ga_f, 0);

</script>


</body>
</html>
