<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>OpenResty - ChangeLog 1.0.15</title>
	<link href="fonts.css" tppabs="https://openresty.org/css/fonts.css" rel='stylesheet' type='text/css'>
	<!--
	If you ever wanted to use LESS instead of CSS...
	<link rel="stylesheet" type="text/less" href="/css/main.less">
	<script src="/js/less.js"></script>
	-->
	<link rel="stylesheet" type="text/css" href="main.css" tppabs="http://openresty.org/css/main.css">
</head>
<body>

<header role="header">
        <p class="site-name left">
                <a href="javascript:if(confirm(%27http://openresty.org/en/.  \n\nThis file was not retrieved by Teleport Ultra, because the server reports that this file cannot be found.  \n\nDo you want to open it from the server?%27))window.location=%27http://openresty.org/en/.%27" tppabs="http://openresty.org/en/.">OpenResty</a>
                <small>Scalable Web Platform by Extending NGINX with Lua</small>
        </p><!-- / site-name -->

        <form action="http://openresty.org/en/search.html" class="right">
                <fieldset>
                        <input type="search" name="query" id="search"
                               placeholder="Search OpenResty.org" required>
                </fieldset>
        </form>
</header>


	<div id="wrapper">
		<div class="sidebar sleft">
			<nav id="nav">
<ul>
<li><a href="getting-started.html" tppabs="http://openresty.org/en/getting-started.html">Getting Started</a></li>
<li><a href="download.html" tppabs="http://openresty.org/en/download.html">Download</a></li>
<li><a href="installation.html" tppabs="http://openresty.org/en/installation.html">Installation</a></li>
<li><a href="upgrading.html" tppabs="http://openresty.org/en/upgrading.html">Upgrading</a></li>
<li><a href="changes.html" tppabs="http://openresty.org/en/changes.html">Changes</a></li>
<li><a href="components.html" tppabs="http://openresty.org/en/components.html">Components</a></li>
<li><a href="community.html" tppabs="http://openresty.org/en/community.html">Community</a></li>
<li><a href="benchmark.html" tppabs="http://openresty.org/en/benchmark.html">Benchmark</a></li>
<li><a href="contact-us.html" tppabs="http://openresty.org/en/contact-us.html">Contact us</a></li>
<li><a href="debugging.html" tppabs="http://openresty.org/en/debugging.html">Debugging</a></li>
<li><a href="donate-online.html" tppabs="http://openresty.org/en/donate-online.html">Donate Online</a></li>
<li><a href="donors.html" tppabs="http://openresty.org/en/donors.html">Donors</a></li>
<li><a href="ebooks.html" tppabs="http://openresty.org/en/ebooks.html">eBooks</a></li>
<li><a href="faq.html" tppabs="http://openresty.org/en/faq.html">FAQ</a></li>
<li><a href="getting-involved.html" tppabs="http://openresty.org/en/getting-involved.html">Getting Involved</a></li>
<li><a href="presentations.html" tppabs="http://openresty.org/en/presentations.html">Presentations</a></li>
<li><a href="profiling.html" tppabs="http://openresty.org/en/profiling.html">Profiling</a></li>
<li><a href="quality-assurance.html" tppabs="http://openresty.org/en/quality-assurance.html">Quality Assurance</a></li>
<li><a href="resources.html" tppabs="http://openresty.org/en/resources.html">Resources</a></li>
<li><a href="samples.html" tppabs="http://openresty.org/en/samples.html">Samples</a></li>
<li><a href="javascript:if(confirm(%27https://openresty.org/survey/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://openresty.org/survey/%27" tppabs="https://openresty.org/survey/">User Survey</a></li>
<li><a href="about.html" tppabs="http://openresty.org/en/about.html">About</a></li>
<li><a href="javascript:if(confirm(%27http://openresty.org/cn/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://openresty.org/cn/%27" tppabs="http://openresty.org/cn/">中文站</a></li>
</ul>

			</nav><!-- / nav -->

<ul class="buttons">
    <!-- <li><a href="#" class="btn rss">RSS Feed</a></li> -->
    <li>
        <!-- <a href="#" class="btn paypal">Donate with PayPal</a> -->
        <form name="_xclick" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
        <input type="hidden" name="cmd" value="_xclick">
        <input type="hidden" name="business" value="agentzh@gmail.com">
        <input type="hidden" name="item_name" value="OpenResty Donation (in USD)">
        <input type="hidden" name="currency_code" value="USD">
        <input type="hidden" name="amount" value="">
        <input type="image" src="donate_paypal.gif" tppabs="http://openresty.org/images/donate_paypal.gif" border="0" name="submit" alt="Donate with PayPal">
        </form>
    </li>
</ul>


		</div><!-- / sidebar left -->
		
		<section id="main">
<div class="item">
        <header>
                <h2>ChangeLog 1.0.15</h2>
                <small>
                    <a href="yichun-zhang.html" tppabs="http://openresty.org/en/yichun-zhang.html">
                    Yichun Zhang
                    </a>,
                    16 Jun 2012 (created 29 Apr 2012)</small>
                <div class="options">
                        <!--
                        <a href="#" class="trigger">Show Options</a>
                        <ul class="first-level">
                                <li><a href="#">close</a></li>
                                <li><a href="#">close others</a></li>
                                <li><a href="#">view</a></li>
                                <li><a href="#">fields</a></li>
                                <li><a href="#">syncing</a></li>
                                <li><a href="#">permalink</a></li>
                                <li><a href="#">references</a></li>
                                <li>
                                        <a href="#">jump</a>
                                        <ul class="second-level">
                                                <li><a href="#">Benchmark</a></li>
                                                <li><a href="#">Presentations</a></li>
                                                <li><a href="#">eBooks</a></li>
                                        </ul>
                                </li>
                        </ul>
                        -->
                </div><!-- / options -->
        </header>
        <div class="body">
<h1 id="mainline-version-1.0.15.11---16-june-2012">Mainline Version 1.0.15.11 - 16 June 2012</h1>
<ul>
<li>upgraded <a href="lua-nginx-module.html" tppabs="http://openresty.org/en/lua-nginx-module.html">Lua Nginx Module</a> to 0.5.0rc32.
<ul>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#header_filter_by_lua%27" tppabs="http://wiki.nginx.org/HttpLuaModule#header_filter_by_lua">header_filter_by_lua</a> and its friend would leak memory when it is the only directive of <a href="lua-nginx-module.html" tppabs="http://openresty.org/en/lua-nginx-module.html">Lua Nginx Module</a> configured in a location and the <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.ctx%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.ctx">ngx.ctx</a> API is also used there.</li>
<li>bugfix: Lua global variables was dangerously shared by all the concurrent requests if the special <code>_G</code> table was used in all those <code>*_by_lua</code> and <code>*_by_lua_file</code> directives. thanks chaoslawful for the patches. but please also note that <code>_G</code> is still shared among all the requests if used in the context of Lua modules, just like all those Lua module level variables.</li>
<li>bugfix: the <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.arg%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.arg">ngx.arg</a> API was not usable within external Lua module files in <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#set_by_lua%27" tppabs="http://wiki.nginx.org/HttpLuaModule#set_by_lua">set_by_lua</a> or <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#set_by_lua_file%27" tppabs="http://wiki.nginx.org/HttpLuaModule#set_by_lua_file">set_by_lua_file</a>.</li>
<li>bugfix: unexpected values on the Lua stack might be concatenated when generating tracebacks for Lua errors and the Lua VM would crash when there happened to be values on the Lua stack that could not be concatenated (like <code>nil</code>).</li>
<li>bugfix: the Lua main thread stack might leak when <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#header_filter_by_lua%27" tppabs="http://wiki.nginx.org/HttpLuaModule#header_filter_by_lua">header_filter_by_lua</a> or <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#header_filter_by_lua_file%27" tppabs="http://wiki.nginx.org/HttpLuaModule#header_filter_by_lua_file">header_filter_by_lua_file</a> are used.</li>
<li>bugfix: the Lua VM might crash when calling the cosocket methods with a bad-typed <code>self</code> argument.</li>
<li>bufix: fixed the directive context for <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#set_by_lua%27" tppabs="http://wiki.nginx.org/HttpLuaModule#set_by_lua">set_by_lua</a> and <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#set_by_lua_file%27" tppabs="http://wiki.nginx.org/HttpLuaModule#set_by_lua_file">set_by_lua_file</a>. they really work in the contexts <code>server</code>, <code>server if</code>, <code>location</code>, and <code>location if</code>. thanks Liu Taihua.</li>
<li>feature: added new directives <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#log_by_lua%27" tppabs="http://wiki.nginx.org/HttpLuaModule#log_by_lua">log_by_lua</a> and <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#log_by_lua_file%27" tppabs="http://wiki.nginx.org/HttpLuaModule#log_by_lua_file">log_by_lua_file</a> to support user Lua code running at the <code>log</code> request processing phase. thanks Matthieu Tourne for the patches.</li>
<li>feature: added new directives <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#body_filter_by_lua%27" tppabs="http://wiki.nginx.org/HttpLuaModule#body_filter_by_lua">body_filter_by_lua</a> and <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#body_filter_by_lua_file%27" tppabs="http://wiki.nginx.org/HttpLuaModule#body_filter_by_lua_file">body_filter_by_lua_file</a> to allow the user implement nginx output body filters in pure Lua.</li>
<li>feature: added support for loading Lua/<a href="luajit.html" tppabs="http://openresty.org/en/luajit.html">LuaJIT</a> raw bytecode files automatically in all those <code>*_by_lua_file</code> config directives. thanks jinglong and chaoslawful for the patches. benchmark results have shown that, for very big Lua-based web applications, bytecode loading gives an order of magnitude speedup at first requests that trigger the Lua code loading.</li>
<li>feature: added new directive <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#lua_transform_underscores_in_response_headers%27" tppabs="http://wiki.nginx.org/HttpLuaModule#lua_transform_underscores_in_response_headers">lua_transform_underscores_in_response_headers</a>. thanks Kindy Lin.</li>
<li>optimize: now we no longer register the <code>ndk</code> and <code>ngx</code> API for <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#set_by_lua%27" tppabs="http://wiki.nginx.org/HttpLuaModule#set_by_lua">set_by_lua</a>* and <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#header_filter_by_lua%27" tppabs="http://wiki.nginx.org/HttpLuaModule#header_filter_by_lua">header_filter_by_lua</a>* at config time rather than request time. this makes these directives 200+% faster.</li>
<li>optimize: eliminated unnecessary string concatenations when generating tracebacks for Lua errors.</li>
<li>optimize: now we store the metatables for <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.req.socket%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.req.socket">ngx.req.socket()</a> and <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.socket.tcp%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.socket.tcp">ngx.socket.tcp()</a> objects into the Lua registry.</li>
<li>optimize: changed the string keys to light userdata for various tracking tables (coroutines table, regex cache table, cosocket connection pool table, <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.ctx%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.ctx">ngx.ctx</a> table, and etc). This gives minor performance improvement from eliminating key hashing and etc. thanks Dirk Feytons.</li>
<li>diagnosis: now we issue user-friendly error messages when the <a href="nginx.html" tppabs="http://openresty.org/en/nginx.html">Nginx</a> Lua APIs are used in the wrong configure directive contexts (e.g., using <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.location.capture%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.location.capture">ngx.location.capture</a> in <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#set_by_lua%27" tppabs="http://wiki.nginx.org/HttpLuaModule#set_by_lua">set_by_lua</a>).</li>
<li>docs: fixed a typo: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.now%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.now">ngx.now</a> returns time of the resolution of milliseconds, rather than microseconds. thanks Wang Xi.</li>
<li>docs: added a note for installation with Lua 5.1 on ubuntu 11.10. thanks Dan Sosedoff.</li>
</ul></li>
<li>updated <a href="javascript:if(confirm(%27https://github.com/openresty/ngx_openresty/blob/master/patches/nginx-1.0.15-poll_del_event_at_exit.patch  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/ngx_openresty/blob/master/patches/nginx-1.0.15-poll_del_event_at_exit.patch%27" tppabs="https://github.com/openresty/ngx_openresty/blob/master/patches/nginx-1.0.15-poll_del_event_at_exit.patch">nginx-1.0.15-poll_del_event_at_exit.patch</a>. thanks Maxim Dounin.</li>
</ul>
<h1 id="stable-release-1.0.15.10---13-june-2012">Stable Release 1.0.15.10 - 13 June 2012</h1>
<p>This release is essentially equivalent to the devel version 1.0.15.9 except excluding all the vim backup files *~ from the source code distribution. thanks Xiaoyu Chen.</p>
<p><a href="components.html" tppabs="http://openresty.org/en/components.html">Components</a> bundled:</p>
<ul>
<li>LuaJIT-2.0.0-beta10</li>
<li>array-var-nginx-module-0.03rc1</li>
<li>auth-request-nginx-module-0.2</li>
<li>drizzle-nginx-module-0.1.2rc7</li>
<li>echo-nginx-module-0.38rc2</li>
<li>encrypted-session-nginx-module-0.02</li>
<li>form-input-nginx-module-0.07rc5</li>
<li>headers-more-nginx-module-0.17rc1</li>
<li>iconv-nginx-module-0.10rc7</li>
<li>lua-5.1.4</li>
<li>lua-cjson-1.0.3</li>
<li>lua-rds-parser-0.05</li>
<li>lua-redis-parser-0.09</li>
<li>lua-resty-memcached-0.07</li>
<li>lua-resty-mysql-0.07</li>
<li>lua-resty-redis-0.09</li>
<li>lua-resty-string-0.06</li>
<li>lua-resty-upload-0.03</li>
<li>memc-nginx-module-0.13rc3</li>
<li>nginx-1.0.15</li>
<li>ngx_coolkit-0.2rc1</li>
<li>ngx_devel_kit-0.2.17</li>
<li>ngx_lua-0.5.0rc30</li>
<li>ngx_postgres-0.9</li>
<li>rds-csv-nginx-module-0.05rc2</li>
<li>rds-json-nginx-module-0.12rc10</li>
<li>redis-nginx-module-0.3.6</li>
<li>redis2-nginx-module-0.08rc4</li>
<li>set-misc-nginx-module-0.22rc8</li>
<li>srcache-nginx-module-0.13rc8</li>
<li>upstream-keepalive-nginx-module-0.7</li>
<li>xss-nginx-module-0.03rc9</li>
</ul>
<h1 id="mainline-version-1.0.15.9---7-june-2012">Mainline Version 1.0.15.9 - 7 June 2012</h1>
<ul>
<li>upgraded <a href="lua-nginx-module.html" tppabs="http://openresty.org/en/lua-nginx-module.html">Lua Nginx Module</a> to 0.5.0rc30.
<ul>
<li>feature: new Lua API, <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.sleep%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.sleep">ngx.sleep()</a>, for doing non-blocking sleep in Lua. thanks jinglong for the patch.</li>
<li>feature: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.log%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.log">ngx.log()</a> now checks if the log level number is in the valid range (0 ~ 8). thanks Xiaoyu Chen (smallfish) for suggesting this improvement.</li>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#tcpsock:receiveuntil%27" tppabs="http://wiki.nginx.org/HttpLuaModule#tcpsock:receiveuntil">cosocket:receiveuntil</a> could leak memory, especially for long pattern string arguments. this bug was caught by <a href="javascript:if(confirm(%27http://search.cpan.org/perldoc?Test::Nginx::Socket  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://search.cpan.org/perldoc?Test::Nginx::Socket%27" tppabs="http://search.cpan.org/perldoc?Test::Nginx::Socket">Test::Nginx::Socket</a> when setting the environment <code>TEST_NGINX_CHECK_LEAK=1</code>.</li>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.re.sub%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.re.sub">ngx.re.sub()</a> could leak memory when the <code>replace</code> template argument string is not well-formed and the <code>o</code> regex option is also specified. this issue was caught by <a href="javascript:if(confirm(%27http://search.cpan.org/perldoc?Test::Nginx::Socket  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://search.cpan.org/perldoc?Test::Nginx::Socket%27" tppabs="http://search.cpan.org/perldoc?Test::Nginx::Socket">Test::Nginx::Socket</a> when setting environment <code>TEST_NGINX_CHECK_LEAK=1</code>.</li>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.re.gmatch%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.re.gmatch">ngx.re.gmatch</a> leaked memory when the <code>o</code> option was not specified. this bug was caught by <a href="javascript:if(confirm(%27http://search.cpan.org/perldoc?Test::Nginx::Socket  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://search.cpan.org/perldoc?Test::Nginx::Socket%27" tppabs="http://search.cpan.org/perldoc?Test::Nginx::Socket">Test::Nginx::Socket</a> when setting the environment <code>TEST_NGINX_CHECK_LEAK=1</code>.</li>
<li>bugfix: the Lua <code>_G</code> special table did not get cleared when <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#lua_code_cache%27" tppabs="http://wiki.nginx.org/HttpLuaModule#lua_code_cache">lua_code_cache</a> is turned off. thanks Moven for reporting this issue.</li>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#tcpsock:connect%27" tppabs="http://wiki.nginx.org/HttpLuaModule#tcpsock:connect">cosocket:connect()</a> might hang on socket creation errors or segfault later due to left-over state flags.</li>
<li>bugfix: refactored on-demand handler registration. the old approach rewrites to static (global) variables at config-time, which could have potential problems with nginx config reloading via the <code>HUP</code> signal.</li>
<li>optimize: now we no longer call <code>ngx_http_post_request</code> to wake up the request associated with the current cosocket upstream from within the cosocket upstream event handlers, but rather call <code>r-&gt;write_event_handler</code> directly. this change can also make backtraces more meaningful because we preserve the original calling stack.</li>
<li>docs: massive wording improvements from the <a href="nginx.html" tppabs="http://openresty.org/en/nginx.html">Nginx</a> Wiki site. thanks Dayo.</li>
</ul></li>
<li>upgraded <a href="rds-json-nginx-module.html" tppabs="http://openresty.org/en/rds-json-nginx-module.html">Rds Json Nginx Module</a> to 0.12rc10.
<ul>
<li>bugfix: refactored on-demand handler registration. the old approach rewrites to static (global) variables at config-time, which could have potential problems with nginx config reloading via the <code>HUP</code> signal.</li>
</ul></li>
<li>bugfix: the (optional) <a href="javascript:if(confirm(%27https://github.com/openresty/no-pool-nginx/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/no-pool-nginx/%27" tppabs="https://github.com/openresty/no-pool-nginx/">no-pool patch</a> might leak memory. now we have updated the no-pool patch to the latest version that is a thorough rewrite.</li>
<li>bugfix: applied <a href="javascript:if(confirm(%27https://github.com/openresty/ngx_openresty/blob/master/patches/nginx-1.0.15-poll_del_event_at_exit.patch  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/ngx_openresty/blob/master/patches/nginx-1.0.15-poll_del_event_at_exit.patch%27" tppabs="https://github.com/openresty/ngx_openresty/blob/master/patches/nginx-1.0.15-poll_del_event_at_exit.patch">poll_del_event_at_exit patch</a> that fixed a segmentation fault in the nginx core when the poll event type is used: <a href="javascript:if(confirm(%27http://mailman.nginx.org/pipermail/nginx-devel/2012-June/002328.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://mailman.nginx.org/pipermail/nginx-devel/2012-June/002328.html%27" tppabs="http://mailman.nginx.org/pipermail/nginx-devel/2012-June/002328.html" class="uri">http://mailman.nginx.org/pipermail/nginx-devel/2012-June/002328.html</a></li>
<li>bugfix: applied the <a href="javascript:if(confirm(%27https://github.com/openresty/ngx_openresty/blob/master/patches/nginx-1.0.15-resolver_debug_log_overflow.patch  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/ngx_openresty/blob/master/patches/nginx-1.0.15-resolver_debug_log_overflow.patch%27" tppabs="https://github.com/openresty/ngx_openresty/blob/master/patches/nginx-1.0.15-resolver_debug_log_overflow.patch">resolver_debug_log patch</a> that fixed reads of uninitialized memory in the nginx core: <a href="javascript:if(confirm(%27http://mailman.nginx.org/pipermail/nginx-devel/2012-June/002281.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://mailman.nginx.org/pipermail/nginx-devel/2012-June/002281.html%27" tppabs="http://mailman.nginx.org/pipermail/nginx-devel/2012-June/002281.html" class="uri">http://mailman.nginx.org/pipermail/nginx-devel/2012-June/002281.html</a></li>
</ul>
<h1 id="mainline-version-1.0.15.7---29-may-2012">Mainline Version 1.0.15.7 - 29 May 2012</h1>
<ul>
<li>bugfix: applied the <a href="javascript:if(confirm(%27https://github.com/openresty/ngx_openresty/blob/master/patches/nginx-1.0.15-add_core_vars_polluting_globals.patch  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/ngx_openresty/blob/master/patches/nginx-1.0.15-add_core_vars_polluting_globals.patch%27" tppabs="https://github.com/openresty/ngx_openresty/blob/master/patches/nginx-1.0.15-add_core_vars_polluting_globals.patch">add_core_vars_polluting_globals patch</a> to fix a bug in the nginx core: <a href="javascript:if(confirm(%27http://mailman.nginx.org/pipermail/nginx-devel/2012-May/002231.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://mailman.nginx.org/pipermail/nginx-devel/2012-May/002231.html%27" tppabs="http://mailman.nginx.org/pipermail/nginx-devel/2012-May/002231.html" class="uri">http://mailman.nginx.org/pipermail/nginx-devel/2012-May/002231.html</a></li>
<li>bugfix: fixed the <a href="javascript:if(confirm(%27https://github.com/openresty/ngx_openresty/blob/master/patches/nginx-1.0.15-filter_finalize_hang.patch  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/ngx_openresty/blob/master/patches/nginx-1.0.15-filter_finalize_hang.patch%27" tppabs="https://github.com/openresty/ngx_openresty/blob/master/patches/nginx-1.0.15-filter_finalize_hang.patch">filter_finalize_hang patch</a> for a regression in the image filters. thanks Maxim Dounin.</li>
<li>upgraded <a href="lua-nginx-module.html" tppabs="http://openresty.org/en/lua-nginx-module.html">Lua Nginx Module</a> to 0.5.0rc29.
<ul>
<li>bugfix: <code>cosocket:receive(0)</code> was not allowed and would throw an error saying <code>0</code> was a bad pattern. thanks huang kun for reporting this issue. This issue at least made <a href="lua-resty-redis-library.html" tppabs="http://openresty.org/en/lua-resty-redis-library.html">Lua Resty Redis Library</a> reject reading 0-size values.</li>
<li>bugfix: the <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#set_by_lua%27" tppabs="http://wiki.nginx.org/HttpLuaModule#set_by_lua">set_by_lua</a> directive did support nginx variable interpolation and there was no easy way to use the dollar sign characters in the literal Lua source. the <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#set_by_lua_file%27" tppabs="http://wiki.nginx.org/HttpLuaModule#set_by_lua_file">set_by_lua_file</a> directive still supports nginx variable interpolation in its lua file path argument. thanks Vittly for reporting this in <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module/issues/111  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module/issues/111%27" tppabs="https://github.com/openresty/lua-nginx-module/issues/111">github issue #111</a> and jinglong for the test in <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module/pull/115  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module/pull/115%27" tppabs="https://github.com/openresty/lua-nginx-module/pull/115">github pull #115</a>.</li>
<li>bugfix: fixed compilation errors when PCRE is missing. thanks Dirk Feytons for the patch.</li>
<li>feature: added the <code>[lua]</code> prefix to the log messages produced by <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.log%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.log">ngx.log()</a> and <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#print%27" tppabs="http://wiki.nginx.org/HttpLuaModule#print">print()</a>. thanks Matthieu Tourne for the patches.</li>
<li><p>feature: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.log%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.log">ngx.log()</a> and <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#print%27" tppabs="http://wiki.nginx.org/HttpLuaModule#print">print()</a> now output more debugging info, i.e., the current lua source file name (if any), the current source line number, and the current calling Lua function name (if any), into the <a href="nginx.html" tppabs="http://openresty.org/en/nginx.html">Nginx</a> <code>error.log</code> file. An example message is</p>
<pre><code>[error] 56651#0: *1 [lua] test.lua:6: bar():
hello</code></pre>
. thanks Matthieu Tourne for the patch.</li>
<li>feature: added the <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#rewrite_by_lua_no_postpone%27" tppabs="http://wiki.nginx.org/HttpLuaModule#rewrite_by_lua_no_postpone">rewrite_by_lua_no_postpone</a> directive which can control whether or not to disable postponing <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#rewrite_by_lua%27" tppabs="http://wiki.nginx.org/HttpLuaModule#rewrite_by_lua">rewrite_by_lua</a> and <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#rewrite_by_lua_file%27" tppabs="http://wiki.nginx.org/HttpLuaModule#rewrite_by_lua_file">rewrite_by_lua_file</a> to the end of the <code>access</code> request-processing phase. thanks Matthieu Tourne for the patches.</li>
<li>feature: added new Lua method <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.decode_args%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.decode_args">ngx.decode_args</a> to decode URI-encoded query strings into Lua tables. thanks Matthieu Tourne for the patches.</li>
<li>feature: the special <code>$prefix</code> and <code>${prefix}</code> notations can now be used in the directives <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#lua_package_path%27" tppabs="http://wiki.nginx.org/HttpLuaModule#lua_package_path">lua_package_path</a> and <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#lua_package_cpath%27" tppabs="http://wiki.nginx.org/HttpLuaModule#lua_package_cpath">lua_package_cpath</a> to indicate the nginx <code>server prefix</code> path (usually determined by the <code>-p PATH</code> command-line option while starting the <a href="nginx.html" tppabs="http://openresty.org/en/nginx.html">Nginx</a> server. thanks Matthieu Tourne for the patches.</li>
<li>docs: various wording improvements in the documentation from Joshua Zhu.</li>
</ul></li>
<li>upgraded <a href="rds-json-nginx-module.html" tppabs="http://openresty.org/en/rds-json-nginx-module.html">Rds Json Nginx Module</a> to 0.12rc9.
<ul>
<li>feature: added the <code>rds_json_errcode_key</code> directive to override the default <code>errcode</code> key in the JSON output. thanks Liseen Wan for the patches.</li>
<li>feature: added the <code>rds_json_errstr_key</code> directive to override the default <code>errstr</code> key in the JSON output. thanks Liseen Wan for the patches.</li>
</ul></li>
<li>upgraded <a href="lua-resty-redis-library.html" tppabs="http://openresty.org/en/lua-resty-redis-library.html">Lua Resty Redis Library</a> to 0.09.
<ul>
<li>feature: the <code>hmset</code> method can now take a key and a hash-like table as its arguments. thanks Brian Akins for the patches.</li>
<li>docs: fixed a typo found by Lance in <code>README</code>.</li>
</ul></li>
</ul>
<h1 id="mainline-version-1.0.15.5---16-may-2012">Mainline Version 1.0.15.5 - 16 May 2012</h1>
<ul>
<li>upgraded <a href="luajit.html" tppabs="http://openresty.org/en/luajit.html">LuaJIT</a> to 2.0.0beta10.
<ul>
<li>see changes here: <a href="javascript:if(confirm(%27http://luajit.org/changes.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://luajit.org/changes.html%27" tppabs="http://luajit.org/changes.html" class="uri">http://luajit.org/changes.html</a></li>
</ul></li>
<li>feature: added the <code>--with-luajit-xcflags=FLAGS</code> option to <code>./configure</code> to add more C compiler options to <a href="luajit.html" tppabs="http://openresty.org/en/luajit.html">LuaJIT</a>'s build system.</li>
<li>upgraded <a href="lua-nginx-module.html" tppabs="http://openresty.org/en/lua-nginx-module.html">Lua Nginx Module</a> to 0.5.0rc28.
<ul>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.req.socket%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.req.socket">ngx.req.socket()</a> did not honor the <code>Expect: 100-continue</code> request header and could hang. thanks Matthieu Tourne for the patch in <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module/pull/107  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module/pull/107%27" tppabs="https://github.com/openresty/lua-nginx-module/pull/107">pull request #107</a>.</li>
<li>bugfix: the <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.req.socket%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.req.socket">ngx.req.socket()</a> object (i.e., the downstream cosocket object) did not work with HTTP 1.1 pipelined requests at all.</li>
<li>bugfix: the <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.req.socket%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.req.socket">ngx.req.socket()</a> object might lose the last part of the request body when receiving data. this regression had appeared in v0.5.0rc25. thanks Matthieu Tourne for reporting it.</li>
<li>feature: detailed backtraces (Lua callstack) will be automatically printed to <code>error.log</code> when the user Lua code is interrupted by Lua exceptions. thanks Matthieu Tourne for the patch in <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module/pull/107  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module/pull/107%27" tppabs="https://github.com/openresty/lua-nginx-module/pull/107">pull request #107</a>.</li>
<li>optimize: removed dead code found by Simon Liu via scan-build.</li>
</ul></li>
<li>upgraded <a href="rds-csv-nginx-module.html" tppabs="http://openresty.org/en/rds-csv-nginx-module.html">Rds Csv Nginx Module</a> to 0.05rc2.
<ul>
<li>bugfix: the output buffer size would get wrong when the <code>affected_rows</code> field is larger than a single-digit number. thanks Wendal Chen for reporting this by using clang.</li>
</ul></li>
<li>upgraded <a href="lua-resty-string-library.html" tppabs="http://openresty.org/en/lua-resty-string-library.html">Lua Resty String Library</a> to 0.06.
<ul>
<li>feature: added new Lua module <code>resty.random</code> that implements secure random and pseudo-random string generators. thanks Chase Colman for the patch.</li>
<li>feature: added new Lua module <code>resty.aes</code> that exposes the AES submodule of OpenSSL via <a href="luajit.html" tppabs="http://openresty.org/en/luajit.html">LuaJIT</a> FFI. thanks Chase Colman for the patch.</li>
</ul></li>
</ul>
<h1 id="mainline-version-1.0.15.3---13-may-2012">Mainline Version 1.0.15.3 - 13 May 2012</h1>
<ul>
<li>now we bundle Sergey A. Osokin's <a href="redis-nginx-module.html" tppabs="http://openresty.org/en/redis-nginx-module.html">Redis Nginx Module</a>, 0.3.6, which is also enabled by default. thanks Zhu Feng for requesting this.</li>
<li>upgraded <a href="lua-nginx-module.html" tppabs="http://openresty.org/en/lua-nginx-module.html">Lua Nginx Module</a> to 0.5.0rc27.
<ul>
<li>bugfix: nginx could crash on request finalization when running the cosocket cleanup handle due to the lack of check of the <code>ctx</code> pointer. thanks shaneeb for reporting this in <a href="javascript:if(confirm(%27https://github.com/openresty/lua-nginx-module/issues/110  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/lua-nginx-module/issues/110%27" tppabs="https://github.com/openresty/lua-nginx-module/issues/110">github issue #110</a>.</li>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.req.get_body_data%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.req.get_body_data">ngx.req.get_body_data()</a> could not handle multi-buffer request bodies and discarded the body data after the first buffer.</li>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.ctx%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.ctx">ngx.ctx</a> was not accessible at all in <code>set_by_lua*</code>. thanks Pierre.</li>
<li>bugfix: fixed typo &quot;on-array&quot;, which should be &quot;non-array&quot;, in an error message.</li>
<li>optimize: now <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.log%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.log">ngx.log</a> is much faster when the log level argument is lower than the actual <a href="javascript:if(confirm(%27http://wiki.nginx.org/CoreModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/CoreModule#error_log%27" tppabs="http://wiki.nginx.org/CoreModule#error_log">error_log</a> level specified in nginx.conf. thanks Matthieu Tourne for providing the patch.</li>
<li>optimize: now we call <code>ngx_http_lua_socket_finalize</code> in <code>cosocket:setkeepalive()</code> to help buffer reuse.</li>
</ul></li>
<li>upgraded <a href="set-misc-nginx-module.html" tppabs="http://openresty.org/en/set-misc-nginx-module.html">Set Misc Nginx Module</a> to 0.22rc8.
<ul>
<li>feature: added new directives <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpSetMiscModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpSetMiscModule#set_secure_random_alphanum%27" tppabs="http://wiki.nginx.org/HttpSetMiscModule#set_secure_random_alphanum">set_secure_random_alphanum</a> and <a href="">set_secure_random_lcalpha|http://wiki.nginx.org/HttpSetMiscModule#set_secure_random_lcalpha</a> for generating cryptographically strong random strings based on the <code>/dev/urandom</code> device. thanks Jeremy Wohl for the patch.</li>
</ul></li>
<li>upgraded <a href="srcache-nginx-module.html" tppabs="http://openresty.org/en/srcache-nginx-module.html">Srcache Nginx Module</a> to 0.13rc8.
<ul>
<li>bugfix: the <code>Content-Length</code> response header for HEAD requests should leave intact when cache hits happen.</li>
<li>bugfix: the <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpSRCacheModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpSRCacheModule#srcache_store%27" tppabs="http://wiki.nginx.org/HttpSRCacheModule#srcache_store">srcache_store</a> subrequest did not set the <code>Content-Length</code> request header properly for multi-buffer request bodies. thanks Feibo Lee for submitting the patch.</li>
<li>feature: HTTP conditional GET requests are now supported (both <code>If-Modified-Since</code> and <code>If-Unmodified-Since</code> request headers are properly handled). thanks Nginx_User777.</li>
</ul></li>
<li>upgraded <a href="lua-redis-parser-library.html" tppabs="http://openresty.org/en/lua-redis-parser-library.html">Lua Redis Parser Library</a> to v0.09.
<ul>
<li>feature: added <code>redis.parser._VERSION</code>.</li>
<li>bugfix: now we use Lua userdata to allocate memory used on the C side to prevent potential leaks caused by malloc/free, as discussed in <a href="javascript:if(confirm(%27https://github.com/agentzh/lua-redis-parser/issues/6  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/agentzh/lua-redis-parser/issues/6%27" tppabs="https://github.com/agentzh/lua-redis-parser/issues/6">github issue #6</a>.</li>
</ul></li>
<li>upgraded <a href="lua-rds-parser-library.html" tppabs="http://openresty.org/en/lua-rds-parser-library.html">Lua Rds Parser Library</a> to 0.05.
<ul>
<li>feature: added <code>redis.parser._VERSION</code>.</li>
<li>bugfix: now we use Lua userdata to allocate memory used on the C side to prevent potential leaks caused by malloc/free, as discussed in <a href="javascript:if(confirm(%27https://github.com/agentzh/lua-redis-parser/issues/6  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/agentzh/lua-redis-parser/issues/6%27" tppabs="https://github.com/agentzh/lua-redis-parser/issues/6">github issue #6</a>.</li>
</ul></li>
<li>upgraded <a href="lua-resty-memcached-library.html" tppabs="http://openresty.org/en/lua-resty-memcached-library.html">Lua Resty Memcached Library</a> to 0.07.
<ul>
<li>feature: now the methods for the Memcached storage commands now accept Lua tables as the <code>value</code> argument. thanks Brian Akins for the patch.</li>
</ul></li>
<li>upgraded <a href="lua-resty-upload-library.html" tppabs="http://openresty.org/en/lua-resty-upload-library.html">Lua Resty Upload Library</a> to 0.03.
<ul>
<li>feature: now the raw headers for each part are also returned, as suggested by zou2062 in <a href="javascript:if(confirm(%27https://github.com/agentzh/lua-resty-upload/issues/1  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/agentzh/lua-resty-upload/issues/1%27" tppabs="https://github.com/agentzh/lua-resty-upload/issues/1">github issue #1</a>.</li>
</ul></li>
<li>applied the patch for a bug in <code>ngx_http_named_location</code> to the nginx core: <a href="javascript:if(confirm(%27http://mailman.nginx.org/pipermail/nginx-devel/2012-May/002166.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://mailman.nginx.org/pipermail/nginx-devel/2012-May/002166.html%27" tppabs="http://mailman.nginx.org/pipermail/nginx-devel/2012-May/002166.html" class="uri">http://mailman.nginx.org/pipermail/nginx-devel/2012-May/002166.html</a></li>
<li>applied the patch for a bug in the filter finalizer to the nginx core: <a href="javascript:if(confirm(%27http://mailman.nginx.org/pipermail/nginx-devel/2012-May/002190.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://mailman.nginx.org/pipermail/nginx-devel/2012-May/002190.html%27" tppabs="http://mailman.nginx.org/pipermail/nginx-devel/2012-May/002190.html" class="uri">http://mailman.nginx.org/pipermail/nginx-devel/2012-May/002190.html</a></li>
</ul>
<h1 id="mainline-version-1.0.15.1---29-april-2012">Mainline Version 1.0.15.1 - 29 April 2012</h1>
<ul>
<li>upgraded the <a href="nginx.html" tppabs="http://openresty.org/en/nginx.html">Nginx</a> core to 1.0.15.</li>
<li>bugfix: now we also add <code>&lt;openresty_prefix&gt;/lualib/?/init.lua</code> to the default <code>package.path</code> search list. thanks bigplum for reporting this issue.</li>
<li>upgraded <a href="lua-nginx-module.html" tppabs="http://openresty.org/en/lua-nginx-module.html">Lua Nginx Module</a> to 0.5.0rc25.
<ul>
<li>bugfix: cosocket connections from the connection pool might lead to segfaults if it is not used immediately. thanks xukaifu for reporting this as <a href="javascript:if(confirm(%27https://github.com/chaoslawful/lua-nginx-module/issues/108  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/chaoslawful/lua-nginx-module/issues/108%27" tppabs="https://github.com/chaoslawful/lua-nginx-module/issues/108">github issue #108</a>.</li>
<li>bugfix: debug logging in the cosocket receive line method could lead to invalid memory reads under extreme network conditions. this issue was caught by <a href="javascript:if(confirm(%27https://github.com/agentzh/mockeagain  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/agentzh/mockeagain%27" tppabs="https://github.com/agentzh/mockeagain">mockeagain</a> in reading mode.</li>
<li>bugfix: downstream cosockets might hang on the receive(size) method call for slow connections. <a href="javascript:if(confirm(%27https://github.com/agentzh/mockeagain  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/agentzh/mockeagain%27" tppabs="https://github.com/agentzh/mockeagain">mockeagain</a> in reading mode caught this issue.</li>
<li>bugfix: we no longer forcibly quit the lua threads by clearing out its environment and running it blindly to the end because Lua GC will collect all those unfinished coroutines anyway.</li>
<li>bugfix: improved the longjmp handling when Lua panic happens.</li>
<li>bugfix: certain compilers might complain about missing declarations for types like <code>int8_t</code>. now we explicitly included <code>stdint.h</code>. thanks runner-mei for reporting it in <a href="javascript:if(confirm(%27https://github.com/chaoslawful/lua-nginx-module/issues/98  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/chaoslawful/lua-nginx-module/issues/98%27" tppabs="https://github.com/chaoslawful/lua-nginx-module/issues/98">github issue #98</a>.</li>
<li>feature: added new constant <code>ngx.HTTP_OPTIONS</code> for the HTTP OPTIONS method.</li>
<li>feature: added support for OPTIONS method in the subrequest capture APIs. thanks Jónas Tryggvi Jóhannsson for requesting this in <a href="javascript:if(confirm(%27https://github.com/chaoslawful/lua-nginx-module/issues/102  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/chaoslawful/lua-nginx-module/issues/102%27" tppabs="https://github.com/chaoslawful/lua-nginx-module/issues/102">github issue #102</a>.</li>
<li>feature: added publich C functions <code>ngx_http_lua_add_package_preload</code>, <code>ngx_http_lua_get_global_state</code>, and <code>ngx_http_lua_get_request</code> to help other <a href="nginx.html" tppabs="http://openresty.org/en/nginx.html">Nginx</a> C modules expose new functionalities to <a href="lua-nginx-module.html" tppabs="http://openresty.org/en/lua-nginx-module.html">Lua Nginx Module</a>. thanks Brian Akins for suggesting them in <a href="javascript:if(confirm(%27https://github.com/chaoslawful/lua-nginx-module/pull/101  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/chaoslawful/lua-nginx-module/pull/101%27" tppabs="https://github.com/chaoslawful/lua-nginx-module/pull/101">github pull request #101</a>.</li>
<li>feature: made <code>ngx_http_lua_api.h</code> visible to other <a href="nginx.html" tppabs="http://openresty.org/en/nginx.html">Nginx</a> modules by adding <code>src/api/</code> to the <code>CORE_INCS</code> config variable value in the config file. thanks Brian Akins for suggesting this in <a href="javascript:if(confirm(%27https://github.com/chaoslawful/lua-nginx-module/pull/105  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/chaoslawful/lua-nginx-module/pull/105%27" tppabs="https://github.com/chaoslawful/lua-nginx-module/pull/105">github pull request #105</a>.</li>
<li>feature: add the <code>gdbinit</code> script to ease Lua user code debugging (Wang Xiaozhe).</li>
<li>optimize: various optimizations in cosocket's timeout handling. this gives about 2.5+% performance boost in some benchmarks using <a href="lua-resty-redis-library.html" tppabs="http://openresty.org/en/lua-resty-redis-library.html">Lua Resty Redis Library</a> and <a href="lua-resty-mysql-library.html" tppabs="http://openresty.org/en/lua-resty-mysql-library.html">Lua Resty MySQL Library</a>.</li>
</ul></li>
<li>upgraded <a href="rds-json-nginx-module.html" tppabs="http://openresty.org/en/rds-json-nginx-module.html">Rds Json Nginx Module</a> to v0.12rc8.
<ul>
<li>bugfix: Microsoft C compilers complained about missing declarations of the type <code>int8_t</code>. now we explicitly include <code>stdint.h</code>. thanks runner-mei for reporting this issue in <a href="javascript:if(confirm(%27https://github.com/agentzh/rds-json-nginx-module/issues/3  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/agentzh/rds-json-nginx-module/issues/3%27" tppabs="https://github.com/agentzh/rds-json-nginx-module/issues/3">github issue #3</a>.</li>
</ul></li>
<li>upgraded <a href="set-misc-nginx-module.html" tppabs="http://openresty.org/en/set-misc-nginx-module.html">Set Misc Nginx Module</a> to 0.22rc7.
<ul>
<li>bugfix: we should omit the <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpSetMiscModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpSetMiscModule#set_sha1%27" tppabs="http://wiki.nginx.org/HttpSetMiscModule#set_sha1">set_sha1</a> directive when we do not have any SHA1 libraries (including OpenSSL) installed. thanks runner-mei for reporting this in <a href="javascript:if(confirm(%27https://github.com/agentzh/set-misc-nginx-module/issues/9  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/agentzh/set-misc-nginx-module/issues/9%27" tppabs="https://github.com/agentzh/set-misc-nginx-module/issues/9">github issue #9</a>.</li>
<li>feature: added new config directive <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpSetMiscModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpSetMiscModule#set_rotate%27" tppabs="http://wiki.nginx.org/HttpSetMiscModule#set_rotate">set_rotate</a>.</li>
</ul></li>
<li>upgraded <a href="drizzle-nginx-module.html" tppabs="http://openresty.org/en/drizzle-nginx-module.html">Drizzle Nginx Module</a> to 0.1.2rc7.
<ul>
<li>bugfix: reading data on a reused MySQL connection (coming from the connection pool) could hang due to the inactive read event when <code>poll</code> event API is used in nginx.</li>
</ul></li>
<li>upgraded <a href="lua-resty-mysql-library.html" tppabs="http://openresty.org/en/lua-resty-mysql-library.html">Lua Resty MySQL Library</a> to 0.07.
<ul>
<li>fixed a typo in error messages.</li>
<li>skipped parsing those column fields that we do not use (yet). this makes things noticeably faster.</li>
</ul></li>
</ul>
<p>See <a href="changelog-1000011.html" tppabs="http://openresty.org/en/changelog-1000011.html">ChangeLog 1.0.11</a> for change log for ngx_openresty 1.0.11.x.</p>

        </div><!-- / body -->
</div><!-- / item -->

		</section><!-- / main -->

<div class="sidebar sright">
        <div class="options">
                <!--
                <ul class="first">
                        <li><a href="#" class="close-all">close all</a></li>
                        <li><a href="#" class="permaview">permaview</a></li>
                        <li><a href="#" class="more-options">options</a></li>
                </ul> --><!-- / first -->
        </div><!-- options -->

        <div class="tabs">
                <ul class="navigation">
                        <!--
                        <li><a href="#" class="current">Timeline</a></li>
                        <li><a href="#">All</a></li>
                        <li><a href="#">Tags</a></li>
                        <li><a href="#">More</a></li>
                        -->
                        <li><span>Timeline</span></li>
                </ul><!-- / navigation -->
                <div class="panes">
                        <div class="pane" id="timeline">
                                <ul>
                                    <li>
                                            <h3>26 May 2016</h3>
                                            <ul>
                                                <li><a href="donors.html" tppabs="http://openresty.org/en/donors.html">Donors</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>11 Apr 2016</h3>
                                            <ul>
                                                <li><a href="using-luarocks.html" tppabs="http://openresty.org/en/using-luarocks.html">Using LuaRocks</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>31 Mar 2016</h3>
                                            <ul>
                                                <li><a href="lua-nginx-module.html" tppabs="http://openresty.org/en/lua-nginx-module.html">Lua Nginx Module</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>25 Mar 2016</h3>
                                            <ul>
                                                <li><a href="installation.html" tppabs="http://openresty.org/en/installation.html">Installation</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>23 Mar 2016</h3>
                                            <ul>
                                                <li><a href="index.htm" tppabs="http://openresty.org/en/openresty.html">OpenResty</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>20 Mar 2016</h3>
                                            <ul>
                                                <li><a href="lua-cjson-library.html" tppabs="http://openresty.org/en/lua-cjson-library.html">Lua Cjson Library</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>17 Mar 2016</h3>
                                            <ul>
                                                <li><a href="download.html" tppabs="http://openresty.org/en/download.html">Download</a></li>
                                                <li><a href="changelog-1009007.html" tppabs="http://openresty.org/en/changelog-1009007.html">ChangeLog 1.9.7</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>08 Mar 2016</h3>
                                            <ul>
                                                <li><a href="presentations.html" tppabs="http://openresty.org/en/presentations.html">Presentations</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>29 Dec 2015</h3>
                                            <ul>
                                                <li><a href="contact-us.html" tppabs="http://openresty.org/en/contact-us.html">Contact Us</a></li>
                                                <li><a href="donate-online.html" tppabs="http://openresty.org/en/donate-online.html">Donate Online</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>27 Dec 2015</h3>
                                            <ul>
                                                <li><a href="resources.html" tppabs="http://openresty.org/en/resources.html">Resources</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>21 Dec 2015</h3>
                                            <ul>
                                                <li><a href="main-menu.html" tppabs="http://openresty.org/en/main-menu.html">Main Menu</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>20 Dec 2015</h3>
                                            <ul>
                                                <li><a href="changes.html" tppabs="http://openresty.org/en/changes.html">Changes</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>23 Nov 2015</h3>
                                            <ul>
                                                <li><a href="components.html" tppabs="http://openresty.org/en/components.html">Components</a></li>
                                                <li><a href="changelog-1009003.html" tppabs="http://openresty.org/en/changelog-1009003.html">ChangeLog 1.9.3</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>31 Jul 2015</h3>
                                            <ul>
                                                <li><a href="faq.html" tppabs="http://openresty.org/en/faq.html">Frequently Asked Questions</a></li>
                                            </ul>
                                    </li>
                                </ul>
                        </div><!-- / pane -->
                </div><!-- / panes -->
        </div><!-- / tabs -->
</div><!-- / sidebar right -->

	</div><!-- / wrapper -->

<div class="content-footer">
<hr class="footer-sep"/>
<div class="footer">
  <p>Copyright © 2016 Yichun Zhang (agentzh)</p>
  <p>100% Powered by OpenResty and PostgreSQL
     (<a href="javascript:if(confirm(%27https://github.com/openresty/openresty.org/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/openresty.org/%27" tppabs="https://github.com/openresty/openresty.org/">
     view the source code of this site</a>)</p>
  <br/>
  <p>京ICP备16021991号</p>
</div>
</div>

<script src="jquery.min.js" tppabs="http://openresty.org/js/jquery.min.js"></script>
<script src="main.js" tppabs="http://openresty.org/js/main.js"></script>

<!-- Google analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24724965-1']);
  //_gaq.push(['_setDomainName', 'http://openresty.org/en/openresty.org']);
  _gaq.push(['_trackPageview']);

  var ga_f = function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www/') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  };
  setTimeout(ga_f, 0);

</script>


</body>
</html>
