<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>OpenResty - ChangeLog 1.2.7</title>
	<link href="fonts.css" tppabs="https://openresty.org/css/fonts.css" rel='stylesheet' type='text/css'>
	<!--
	If you ever wanted to use LESS instead of CSS...
	<link rel="stylesheet" type="text/less" href="/css/main.less">
	<script src="/js/less.js"></script>
	-->
	<link rel="stylesheet" type="text/css" href="main.css" tppabs="http://openresty.org/css/main.css">
</head>
<body>

<header role="header">
        <p class="site-name left">
                <a href="javascript:if(confirm(%27http://openresty.org/en/.  \n\nThis file was not retrieved by Teleport Ultra, because the server reports that this file cannot be found.  \n\nDo you want to open it from the server?%27))window.location=%27http://openresty.org/en/.%27" tppabs="http://openresty.org/en/.">OpenResty</a>
                <small>Scalable Web Platform by Extending NGINX with Lua</small>
        </p><!-- / site-name -->

        <form action="http://openresty.org/en/search.html" class="right">
                <fieldset>
                        <input type="search" name="query" id="search"
                               placeholder="Search OpenResty.org" required>
                </fieldset>
        </form>
</header>


	<div id="wrapper">
		<div class="sidebar sleft">
			<nav id="nav">
<ul>
<li><a href="getting-started.html" tppabs="http://openresty.org/en/getting-started.html">Getting Started</a></li>
<li><a href="download.html" tppabs="http://openresty.org/en/download.html">Download</a></li>
<li><a href="installation.html" tppabs="http://openresty.org/en/installation.html">Installation</a></li>
<li><a href="upgrading.html" tppabs="http://openresty.org/en/upgrading.html">Upgrading</a></li>
<li><a href="changes.html" tppabs="http://openresty.org/en/changes.html">Changes</a></li>
<li><a href="components.html" tppabs="http://openresty.org/en/components.html">Components</a></li>
<li><a href="community.html" tppabs="http://openresty.org/en/community.html">Community</a></li>
<li><a href="benchmark.html" tppabs="http://openresty.org/en/benchmark.html">Benchmark</a></li>
<li><a href="contact-us.html" tppabs="http://openresty.org/en/contact-us.html">Contact us</a></li>
<li><a href="debugging.html" tppabs="http://openresty.org/en/debugging.html">Debugging</a></li>
<li><a href="donate-online.html" tppabs="http://openresty.org/en/donate-online.html">Donate Online</a></li>
<li><a href="donors.html" tppabs="http://openresty.org/en/donors.html">Donors</a></li>
<li><a href="ebooks.html" tppabs="http://openresty.org/en/ebooks.html">eBooks</a></li>
<li><a href="faq.html" tppabs="http://openresty.org/en/faq.html">FAQ</a></li>
<li><a href="getting-involved.html" tppabs="http://openresty.org/en/getting-involved.html">Getting Involved</a></li>
<li><a href="presentations.html" tppabs="http://openresty.org/en/presentations.html">Presentations</a></li>
<li><a href="profiling.html" tppabs="http://openresty.org/en/profiling.html">Profiling</a></li>
<li><a href="quality-assurance.html" tppabs="http://openresty.org/en/quality-assurance.html">Quality Assurance</a></li>
<li><a href="resources.html" tppabs="http://openresty.org/en/resources.html">Resources</a></li>
<li><a href="samples.html" tppabs="http://openresty.org/en/samples.html">Samples</a></li>
<li><a href="javascript:if(confirm(%27https://openresty.org/survey/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://openresty.org/survey/%27" tppabs="https://openresty.org/survey/">User Survey</a></li>
<li><a href="about.html" tppabs="http://openresty.org/en/about.html">About</a></li>
<li><a href="javascript:if(confirm(%27http://openresty.org/cn/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://openresty.org/cn/%27" tppabs="http://openresty.org/cn/">中文站</a></li>
</ul>

			</nav><!-- / nav -->

<ul class="buttons">
    <!-- <li><a href="#" class="btn rss">RSS Feed</a></li> -->
    <li>
        <!-- <a href="#" class="btn paypal">Donate with PayPal</a> -->
        <form name="_xclick" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
        <input type="hidden" name="cmd" value="_xclick">
        <input type="hidden" name="business" value="agentzh@gmail.com">
        <input type="hidden" name="item_name" value="OpenResty Donation (in USD)">
        <input type="hidden" name="currency_code" value="USD">
        <input type="hidden" name="amount" value="">
        <input type="image" src="donate_paypal.gif" tppabs="http://openresty.org/images/donate_paypal.gif" border="0" name="submit" alt="Donate with PayPal">
        </form>
    </li>
</ul>


		</div><!-- / sidebar left -->
		
		<section id="main">
<div class="item">
        <header>
                <h2>ChangeLog 1.2.7</h2>
                <small>
                    <a href="yichun-zhang.html" tppabs="http://openresty.org/en/yichun-zhang.html">
                    Yichun Zhang
                    </a>,
                    13 May 2013 (created 23 Feb 2013)</small>
                <div class="options">
                        <!--
                        <a href="#" class="trigger">Show Options</a>
                        <ul class="first-level">
                                <li><a href="#">close</a></li>
                                <li><a href="#">close others</a></li>
                                <li><a href="#">view</a></li>
                                <li><a href="#">fields</a></li>
                                <li><a href="#">syncing</a></li>
                                <li><a href="#">permalink</a></li>
                                <li><a href="#">references</a></li>
                                <li>
                                        <a href="#">jump</a>
                                        <ul class="second-level">
                                                <li><a href="#">Benchmark</a></li>
                                                <li><a href="#">Presentations</a></li>
                                                <li><a href="#">eBooks</a></li>
                                        </ul>
                                </li>
                        </ul>
                        -->
                </div><!-- / options -->
        </header>
        <div class="body">
<h1 id="stable-release-1.2.7.8---13-may-2013">Stable Release 1.2.7.8 - 13 May 2013</h1>
<ul>
<li>applied the official patch for the nginx core to address the recent nginx security vulnerability CVE-2013-2070.</li>
</ul>
<h1 id="stable-release-1.2.7.6---17-april-2013">Stable Release 1.2.7.6 - 17 April 2013</h1>
<ul>
<li>upgraded <a href="lua-nginx-module.html" tppabs="http://openresty.org/en/lua-nginx-module.html">Lua Nginx Module</a> to 0.7.21.
<ul>
<li>bugfix: boolean values in an array table were rejected with the exception &quot;attempt to use boolean as query arg value&quot; while encoding a Lua (hash) table as URL arguments. thanks Calin Don for reporting this issue.</li>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.req.raw_header%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.req.raw_header">ngx.req.raw_header()</a> would return an empty string value when the default header buffer (<code>c-&gt;buffer</code>) can hold the request line but not the whole header. thanks KDr2 for reporting this issue.</li>
</ul></li>
<li>upgraded <a href="encrypted-session-nginx-module.html" tppabs="http://openresty.org/en/encrypted-session-nginx-module.html">Encrypted Session Nginx Module</a> to 0.03.
<ul>
<li>refactor: fixed typos in the source code: replacing &quot;3des&quot; with &quot;aes&quot;; thanks Edgar Liu for reporting this issue.</li>
</ul></li>
<li>upgraded <a href="iconv-nginx-module.html" tppabs="http://openresty.org/en/iconv-nginx-module.html">Iconv Nginx Module</a> to 0.10.
<ul>
<li>bugfix: failed to build on Solaris with the bogus error message &quot;ngx_devel_kit is required to build ngx_iconv; please put it before ngx_iconv&quot;. The following components are bundled:</li>
</ul></li>
<li>LuaJIT-2.0.1 (with hotfix #1)</li>
<li>array-var-nginx-module-0.03rc1</li>
<li>auth-request-nginx-module-0.2</li>
<li>drizzle-nginx-module-0.1.5</li>
<li>echo-nginx-module-0.45</li>
<li>encrypted-session-nginx-module-0.03</li>
<li>form-input-nginx-module-0.07</li>
<li>headers-more-nginx-module-0.19</li>
<li>iconv-nginx-module-0.10</li>
<li>lua-5.1.5</li>
<li>lua-cjson-1.0.3</li>
<li>lua-rds-parser-0.05</li>
<li>lua-redis-parser-0.10</li>
<li>lua-resty-dns-0.09</li>
<li>lua-resty-memcached-0.11</li>
<li>lua-resty-mysql-0.13</li>
<li>lua-resty-redis-0.15</li>
<li>lua-resty-string-0.08</li>
<li>lua-resty-upload-0.08</li>
<li>memc-nginx-module-0.13rc3</li>
<li>nginx-1.2.7</li>
<li>ngx_coolkit-0.2rc1</li>
<li>ngx_devel_kit-0.2.18</li>
<li>ngx_lua-0.7.21</li>
<li>ngx_postgres-1.0rc2</li>
<li>rds-csv-nginx-module-0.05rc2</li>
<li>rds-json-nginx-module-0.12rc10</li>
<li>redis-nginx-module-0.3.6</li>
<li>redis2-nginx-module-0.10</li>
<li>set-misc-nginx-module-0.22rc8</li>
<li>srcache-nginx-module-0.19</li>
<li>xss-nginx-module-0.03rc9</li>
</ul>
<h1 id="mainline-version-1.2.7.5---9-april-2013">Mainline Version 1.2.7.5 - 9 April 2013</h1>
<ul>
<li>upgraded <a href="echo-nginx-module.html" tppabs="http://openresty.org/en/echo-nginx-module.html">Echo Nginx Module</a> to 0.45.
<ul>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpEchoModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpEchoModule#.24echo_client_request_headers%27" tppabs="http://wiki.nginx.org/HttpEchoModule#.24echo_client_request_headers">$echo_client_request_headers</a> would return the first part of the request body when request body was read before reading this variable.</li>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpEchoModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpEchoModule#.24echo_client_request_headers%27" tppabs="http://wiki.nginx.org/HttpEchoModule#.24echo_client_request_headers">$echo_client_request_headers</a> might not work properly in a subrequest.</li>
</ul></li>
<li>upgraded <a href="drizzle-nginx-module.html" tppabs="http://openresty.org/en/drizzle-nginx-module.html">Drizzle Nginx Module</a> to 0.1.5.
<ul>
<li>bugfix: compilation errors occurred with nginx 1.3.15. thanks Karl Blessing for reporting this issue.</li>
<li>docs: fixed a typo in the sample code for <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpDrizzleModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpDrizzleModule#.24drizzle_thread_id%27" tppabs="http://wiki.nginx.org/HttpDrizzleModule#.24drizzle_thread_id">$drizzle_thread_id</a> reported by 岚偑/yy秋叶.</li>
<li>docs: documented the config syntax for db passwords with special chars in them.</li>
</ul></li>
<li>upgraded <a href="lua-nginx-module.html" tppabs="http://openresty.org/en/lua-nginx-module.html">Lua Nginx Module</a> to 0.7.20.
<ul>
<li>feature: now we allow the &quot;0&quot; time argument in <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.sleep%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.sleep">ngx.sleep()</a>.</li>
<li>feature: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.location.capture%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.location.capture">ngx.location.capture</a> and <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.location.capture_multi%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.location.capture_multi">ngx.location.capture_multi</a> now return a lua table with the boolean field &quot;truncated&quot;, which indicates whether the subrequest response body is truncated.</li>
<li>bugfix: request hung when rewrite cycled in <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.req.set_uri%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.req.set_uri">ngx.req.set_uri(uri, true)</a> instead of throwing out an error log message and a 500 page properly. thanks Calin Don for the report.</li>
<li>bugfix: assignment to <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.status%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.status">ngx.status</a> did not take effect when the response status line had already been generated (by ngx_proxy or others). thanks eqiuno for reporting this issue.</li>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.req.raw_header%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.req.raw_header">ngx.req.raw_header()</a> would return the first part of the request body when request body was read before the call. thanks Matthieu Tourne for reporting this issue.</li>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.req.raw_header%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.req.raw_header">ngx.req.raw_header()</a> might not work properly in a subrequest.</li>
<li>bugfix: we would override the subrequest response status code later when error happens.</li>
<li>bugfix: the debug log message &quot;lua set uri jump to <uri>&quot; generated by <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.req.set_uri%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.req.set_uri">ngx.req.set_uri(uri, true)</a> was wrong for &quot;<uri>&quot; was the old URI.</li>
</ul></li>
<li>upgraded <a href="lua-resty-mysql-library.html" tppabs="http://openresty.org/en/lua-resty-mysql-library.html">Lua Resty MySQL Library</a> to 0.13.
<ul>
<li>bugfix: 64-bit integer values in the MySQL packets (like last insert ids) could not be properly parsed due to the lack of support for 64-bit integers in <a href="luajit.html" tppabs="http://openresty.org/en/luajit.html">LuaJIT</a>'s standard &quot;bit&quot; module. thanks Azure Wang for the patch implementing a temporary workaround.</li>
<li>docs: various typo fixes from Tor Hveem and doledoletree.</li>
</ul></li>
<li>upgraded <a href="lua-resty-memcached-library.html" tppabs="http://openresty.org/en/lua-resty-memcached-library.html">Lua Resty Memcached Library</a> to 0.11.
<ul>
<li>feature: added new method &quot;touch&quot; for the new Memcached command &quot;touch&quot;. thanks merlin for the patch.</li>
</ul></li>
<li>updated the <a href="javascript:if(confirm(%27https://raw.github.com/agentzh/ngx_openresty/master/patches/nginx-1.2.7-upstream_truncation.patch  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://raw.github.com/agentzh/ngx_openresty/master/patches/nginx-1.2.7-upstream_truncation.patch%27" tppabs="https://raw.github.com/agentzh/ngx_openresty/master/patches/nginx-1.2.7-upstream_truncation.patch">upstream_truncation patch</a> for the <a href="nginx.html" tppabs="http://openresty.org/en/nginx.html">Nginx</a> core.
<ul>
<li>bugfix: chunked upstream response bodies were treated as 502. thanks Andy Yuan for the report.</li>
<li>bugfix: request response status was changed to 502 after response header was sent in case of data truncation.</li>
<li>bugfix: the &quot;last buf&quot; (i.e., bufs with &quot;last_buf&quot; or &quot;last_in_chain&quot; set) should not be sent downstream in case of upstream data truncation.</li>
</ul></li>
<li>updated the <a href="javascript:if(confirm(%27https://raw.github.com/agentzh/ngx_openresty/master/patches/nginx-1.2.7-dtrace.patch  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://raw.github.com/agentzh/ngx_openresty/master/patches/nginx-1.2.7-dtrace.patch%27" tppabs="https://raw.github.com/agentzh/ngx_openresty/master/patches/nginx-1.2.7-dtrace.patch">dtrace patch</a> for the <a href="nginx.html" tppabs="http://openresty.org/en/nginx.html">Nginx</a> core.
<ul>
<li>feature: made the stap function <code>ngx_chain_dump()</code> print out info about the &quot;last_buf&quot; and &quot;last_in_chain&quot; flags in bufs and removed the old &quot;<eof>&quot; notation in the output.</li>
</ul></li>
</ul>
<h1 id="mainline-version-1.2.7.3---24-march-2013">Mainline Version 1.2.7.3 - 24 March 2013</h1>
<ul>
<li>upgraded <a href="lua-nginx-module.html" tppabs="http://openresty.org/en/lua-nginx-module.html">Lua Nginx Module</a> to 0.7.18.
<ul>
<li>feature: implemented <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.req.http_version%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.req.http_version">ngx.req.http_version()</a> that returns the HTTP version number for the current request. thanks Matthieu Tourne for requesting this.</li>
<li>feature: implemented the <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.req.raw_header%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.req.raw_header">ngx.req.raw_header()</a> function for returning the original raw HTTP protocol header string received by <a href="nginx.html" tppabs="http://openresty.org/en/nginx.html">Nginx</a>. thanks Matthieu Tourne for requesting this.</li>
<li>feature: added new methods <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.shared.DICT.safe_set%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.shared.DICT.safe_set">safe_set</a> and <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.shared.DICT.safe_add%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.shared.DICT.safe_add">safe_add</a> to ngx.shared.DICT objects, which never override existing unexpired items but immediately return nil and a &quot;no memory&quot; string message when running out of storage. thanks Matthieu Tourne for requesting this.</li>
<li>feature: datagram Unix domain sockets created by <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.socket.udp%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.socket.udp">ngx.socket.udp()</a> can now receive data from the other endpoint via &quot;autobind&quot; on Linux. thanks Dirk Feytons for the patch.</li>
<li>change: the <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.re.match%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.re.match">ngx.re.match</a>, <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.re.gmatch%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.re.gmatch">ngx.re.gmatch</a>, <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.re.sub%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.re.sub">ngx.re.sub</a>, and <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.re.gsub%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.re.gsub">ngx.re.gsub</a> functions used to throw Lua exceptions aggressively for all the error conditions; now they just return an additional Lua string describing the error for almost all common errors instead of throwing exceptions, including pcre compile-time and exec-time failures. thanks Matthieu Tourne for requesting this change.</li>
<li>bugfix: use of <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.req.socket%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.req.socket">ngx.req.socket()</a> could make socket reading hang infinitely when the request did not take a request body at all (that is, when the Content-Length request header is missing). thanks Matthieu Tourne for reporting this issue.</li>
<li>bugfix: when a non-table value was specified for the &quot;args&quot; option in the <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.location.capture%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.location.capture">ngx.location.capture</a> or <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.location.capture_multi%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.location.capture_multi">ngx.location.capture_multi</a> call, memory invalid access might happen, which resulted in garbage data at least. thanks Siddon Tang for reporting this issue.</li>
<li>bugfix: when the Lua code using UDP/TCP cosockets + resolver was run in a subrequest, the subrequest could hang due to missing calls to <code>ngx_http_run_posted_requests</code> in the UDP/TCP cosocket resolver handler. thanks Lanshun Zhou for reporting this issue.</li>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.socket.udp%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.socket.udp">ngx.socket.udp</a>: memory leaks or invalid memory accesses might happen when the DNS resolver failed to resolve.</li>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#rewrite_by_lua_no_postpone%27" tppabs="http://wiki.nginx.org/HttpLuaModule#rewrite_by_lua_no_postpone">rewrite_by_lua_no_postpone</a> can only work globally and did not reject contexts like &quot;server&quot; and &quot;location&quot; configuration blocks. thanks Matthieu Tourne for reporting this issue.</li>
<li>bugfix: (large) in-file request bodies could not be inherited correctly by multiple subrequests issued by <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.location.capture%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.location.capture">ngx.location.capture</a>. thanks Matthieu Tourne for reporting this issue.</li>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.req.get_headers%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.req.get_headers">ngx.req.get_headers(limit, true)</a> would still return header names in the pure lower-case form when the &quot;limit&quot; argument was an integer. thanks Matthieu Tourne for reporting this issue.</li>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.re.match%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.re.match">ngx.re.match</a>: when the &quot;D&quot; regular expression option was specified, an empty Lua table would always be created even when the named capture was actually empty. thanks Matthieu Tourne for reporting this issue.</li>
<li>docs: made it explicit that redirecting to external domains is also supported in <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpLuaModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpLuaModule#ngx.redirect%27" tppabs="http://wiki.nginx.org/HttpLuaModule#ngx.redirect">ngx.redirect()</a>. thanks Ron Gomes for asking.</li>
</ul></li>
<li>upgraded <a href="echo-nginx-module.html" tppabs="http://openresty.org/en/echo-nginx-module.html">Echo Nginx Module</a> to 0.44.
<ul>
<li>bugfix: <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpEchoModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpEchoModule#.24echo_client_request_headers%27" tppabs="http://wiki.nginx.org/HttpEchoModule#.24echo_client_request_headers">$echo_client_request_headers</a> was evaluated to only the last part of the request header when &quot;large header buffers&quot; were used.</li>
<li>change: preserve the trailing <code>CR LF</code> at the end of the whole HTTP protocol header returned by <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpEchoModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpEchoModule#.24echo_client_request_headers%27" tppabs="http://wiki.nginx.org/HttpEchoModule#.24echo_client_request_headers">$echo_client_request_headers</a>.</li>
</ul></li>
<li>upgraded <a href="redis-2-nginx-module.html" tppabs="http://openresty.org/en/redis-2-nginx-module.html">Redis2 Nginx Module</a> to 0.10.
<ul>
<li>feature: allow use of the request body data in <a href="nginx.html" tppabs="http://openresty.org/en/nginx.html">Nginx</a> variables for main requests by always reading the request body automatically; we used to always discard the request body just like the standard ngx_memcached module. thanks Ristona Hua for sharing this usage.</li>
<li>docs: updated the docs for the limitations on Redis pub/sub. thanks LazyZhu for pointing out the potential confusions.</li>
<li>docs: now we recommend <a href="lua-resty-redis-library.html" tppabs="http://openresty.org/en/lua-resty-redis-library.html">Lua Resty Redis Library</a> instead when being used with <a href="lua-nginx-module.html" tppabs="http://openresty.org/en/lua-nginx-module.html">Lua Nginx Module</a>.</li>
</ul></li>
<li>upgraded <a href="lua-resty-upload-library.html" tppabs="http://openresty.org/en/lua-resty-upload-library.html">Lua Resty Upload Library</a> to 0.08.
<ul>
<li>bugfix: when multiple <code>Content-Type</code> request headers were given, a Lua exception would be thrown; now we just pick up the first one.</li>
<li>docs: better error handling in the code sample. thanks wgm.china for the report.</li>
</ul></li>
<li>feature: applied <a href="javascript:if(confirm(%27https://raw.github.com/agentzh/ngx_openresty/master/patches/ngx_http_redis-0.3.6-variables_in_redis_pass.patch  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://raw.github.com/agentzh/ngx_openresty/master/patches/ngx_http_redis-0.3.6-variables_in_redis_pass.patch%27" tppabs="https://raw.github.com/agentzh/ngx_openresty/master/patches/ngx_http_redis-0.3.6-variables_in_redis_pass.patch">the variables_in_redis_pass patch</a> to <a href="redis-nginx-module.html" tppabs="http://openresty.org/en/redis-nginx-module.html">Redis Nginx Module</a> 0.3.6 to allow use of <a href="nginx.html" tppabs="http://openresty.org/en/nginx.html">Nginx</a> variables in the <a href="javascript:if(confirm(%27http://wiki.nginx.org/HttpRedisModule  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://wiki.nginx.org/HttpRedisModule#redis_pass%27" tppabs="http://wiki.nginx.org/HttpRedisModule#redis_pass">redis_pass</a> directive. thanks Diptamay Sanyal for requesting this feature.</li>
<li>bugfix: applied Lanshun Zhou's <a href="javascript:if(confirm(%27https://raw.github.com/agentzh/ngx_openresty/master/patches/nginx-1.2.7-run_posted_requests_in_resolver.patch  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://raw.github.com/agentzh/ngx_openresty/master/patches/nginx-1.2.7-run_posted_requests_in_resolver.patch%27" tppabs="https://raw.github.com/agentzh/ngx_openresty/master/patches/nginx-1.2.7-run_posted_requests_in_resolver.patch">run_posted_requests_in_resolver patch</a> to the <a href="nginx.html" tppabs="http://openresty.org/en/nginx.html">Nginx</a> core: <a href="javascript:if(confirm(%27http://mailman.nginx.org/pipermail/nginx-devel/2013-March/003476.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://mailman.nginx.org/pipermail/nginx-devel/2013-March/003476.html%27" tppabs="http://mailman.nginx.org/pipermail/nginx-devel/2013-March/003476.html" class="uri">http://mailman.nginx.org/pipermail/nginx-devel/2013-March/003476.html</a></li>
<li>bugfix: applied the official <a href="javascript:if(confirm(%27http://luajit.org/download/v2.0.1_hotfix1.patch  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://luajit.org/download/v2.0.1_hotfix1.patch%27" tppabs="http://luajit.org/download/v2.0.1_hotfix1.patch">hotfix #1 patch</a> for the bundled <a href="luajit.html" tppabs="http://openresty.org/en/luajit.html">LuaJIT</a> 2.0.1.</li>
</ul>
<h1 id="mainline-version-1.2.7.1---22-february-2013">Mainline Version 1.2.7.1 - 22 February 2013</h1>
<ul>
<li>upgraded the <a href="nginx.html" tppabs="http://openresty.org/en/nginx.html">Nginx</a> core to 1.2.7.
<ul>
<li>see <a href="javascript:if(confirm(%27http://nginx.org/en/CHANGES-1.2  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://nginx.org/en/CHANGES-1.2%27" tppabs="http://nginx.org/en/CHANGES-1.2" class="uri">http://nginx.org/en/CHANGES-1.2</a> for changes.</li>
</ul></li>
<li>upgraded <a href="luajit.html" tppabs="http://openresty.org/en/luajit.html">LuaJIT</a> 2.0 to 2.0.1.
<ul>
<li>see <a href="javascript:if(confirm(%27http://luajit.org/changes.html  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://luajit.org/changes.html%27" tppabs="http://luajit.org/changes.html" class="uri">http://luajit.org/changes.html</a> for changes.</li>
</ul></li>
<li>upgraded <a href="lua-nginx-module.html" tppabs="http://openresty.org/en/lua-nginx-module.html">Lua Nginx Module</a> to 0.7.16.
<ul>
<li>optimize: removed the unsed <code>size</code> field and related computatins from the script engine for the <code>ngx.re</code> API.</li>
<li>optimize: saved a little memory in the script engine for the <code>ngx.re</code> API. See <a href="changelog-1002006.html" tppabs="http://openresty.org/en/changelog-1002006.html">ChangeLog 1.2.6</a> for change log for <a href="index.htm" tppabs="http://openresty.org/en/openresty.html">OpenResty</a> 1.2.6.x.</li>
</ul></li>
</ul>

        </div><!-- / body -->
</div><!-- / item -->

		</section><!-- / main -->

<div class="sidebar sright">
        <div class="options">
                <!--
                <ul class="first">
                        <li><a href="#" class="close-all">close all</a></li>
                        <li><a href="#" class="permaview">permaview</a></li>
                        <li><a href="#" class="more-options">options</a></li>
                </ul> --><!-- / first -->
        </div><!-- options -->

        <div class="tabs">
                <ul class="navigation">
                        <!--
                        <li><a href="#" class="current">Timeline</a></li>
                        <li><a href="#">All</a></li>
                        <li><a href="#">Tags</a></li>
                        <li><a href="#">More</a></li>
                        -->
                        <li><span>Timeline</span></li>
                </ul><!-- / navigation -->
                <div class="panes">
                        <div class="pane" id="timeline">
                                <ul>
                                    <li>
                                            <h3>26 May 2016</h3>
                                            <ul>
                                                <li><a href="donors.html" tppabs="http://openresty.org/en/donors.html">Donors</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>11 Apr 2016</h3>
                                            <ul>
                                                <li><a href="using-luarocks.html" tppabs="http://openresty.org/en/using-luarocks.html">Using LuaRocks</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>31 Mar 2016</h3>
                                            <ul>
                                                <li><a href="lua-nginx-module.html" tppabs="http://openresty.org/en/lua-nginx-module.html">Lua Nginx Module</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>25 Mar 2016</h3>
                                            <ul>
                                                <li><a href="installation.html" tppabs="http://openresty.org/en/installation.html">Installation</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>23 Mar 2016</h3>
                                            <ul>
                                                <li><a href="index.htm" tppabs="http://openresty.org/en/openresty.html">OpenResty</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>20 Mar 2016</h3>
                                            <ul>
                                                <li><a href="lua-cjson-library.html" tppabs="http://openresty.org/en/lua-cjson-library.html">Lua Cjson Library</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>17 Mar 2016</h3>
                                            <ul>
                                                <li><a href="download.html" tppabs="http://openresty.org/en/download.html">Download</a></li>
                                                <li><a href="changelog-1009007.html" tppabs="http://openresty.org/en/changelog-1009007.html">ChangeLog 1.9.7</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>08 Mar 2016</h3>
                                            <ul>
                                                <li><a href="presentations.html" tppabs="http://openresty.org/en/presentations.html">Presentations</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>29 Dec 2015</h3>
                                            <ul>
                                                <li><a href="contact-us.html" tppabs="http://openresty.org/en/contact-us.html">Contact Us</a></li>
                                                <li><a href="donate-online.html" tppabs="http://openresty.org/en/donate-online.html">Donate Online</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>27 Dec 2015</h3>
                                            <ul>
                                                <li><a href="resources.html" tppabs="http://openresty.org/en/resources.html">Resources</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>21 Dec 2015</h3>
                                            <ul>
                                                <li><a href="main-menu.html" tppabs="http://openresty.org/en/main-menu.html">Main Menu</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>20 Dec 2015</h3>
                                            <ul>
                                                <li><a href="changes.html" tppabs="http://openresty.org/en/changes.html">Changes</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>23 Nov 2015</h3>
                                            <ul>
                                                <li><a href="components.html" tppabs="http://openresty.org/en/components.html">Components</a></li>
                                                <li><a href="changelog-1009003.html" tppabs="http://openresty.org/en/changelog-1009003.html">ChangeLog 1.9.3</a></li>
                                            </ul>
                                    </li>
                                    <li>
                                            <h3>31 Jul 2015</h3>
                                            <ul>
                                                <li><a href="faq.html" tppabs="http://openresty.org/en/faq.html">Frequently Asked Questions</a></li>
                                            </ul>
                                    </li>
                                </ul>
                        </div><!-- / pane -->
                </div><!-- / panes -->
        </div><!-- / tabs -->
</div><!-- / sidebar right -->

	</div><!-- / wrapper -->

<div class="content-footer">
<hr class="footer-sep"/>
<div class="footer">
  <p>Copyright © 2016 Yichun Zhang (agentzh)</p>
  <p>100% Powered by OpenResty and PostgreSQL
     (<a href="javascript:if(confirm(%27https://github.com/openresty/openresty.org/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27https://github.com/openresty/openresty.org/%27" tppabs="https://github.com/openresty/openresty.org/">
     view the source code of this site</a>)</p>
  <br/>
  <p>京ICP备16021991号</p>
</div>
</div>

<script src="jquery.min.js" tppabs="http://openresty.org/js/jquery.min.js"></script>
<script src="main.js" tppabs="http://openresty.org/js/main.js"></script>

<!-- Google analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24724965-1']);
  //_gaq.push(['_setDomainName', 'http://openresty.org/en/openresty.org']);
  _gaq.push(['_trackPageview']);

  var ga_f = function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www/') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  };
  setTimeout(ga_f, 0);

</script>


</body>
</html>
