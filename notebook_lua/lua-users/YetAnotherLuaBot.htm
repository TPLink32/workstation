<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>lua-users wiki: Yet Another Lua Bot</TITLE>
<LINK TYPE="text/css" REL="stylesheet" HREF="/styles/main.css">
</HEAD>
<BODY ><table width="100%" border="0"> <tr><td align=left width="100%"><h1><a href="/cgi-bin/wiki.pl?action=search&amp;string=YetAnotherLuaBot&amp;body=1" title="List pages referring to YetAnotherLuaBot">Yet Another Lua Bot</a></h1></td><td align=right>
    <table cellpadding="0" cellspacing="0" border="0" width="1%">
      <tbody>
        <tr>
            <td><a href="/">
            <img src="/images/nav-logo.png" alt="lua-users home" width="177" height="40" border="0"></a></td>
        </tr>
        <tr>
            <td>
            <table cellpadding="0" cellspacing="0" border="0" width="100%">
                <tbody>
                <tr>
                    <td><img src="/images/nav-elbow.png" alt="" width="48" height="40"></td>
                    <td nowrap valign="middle" width="100%">
                        <a href="/wiki/" class="nav">wiki</a></td>
                </tr>
                </tbody>
            </table>
            </td>
        </tr>
      </tbody>
    </table>
<form method="post" action="http://lua-users.org/wiki/FindPage" enctype="application/x-www-form-urlencoded" style="display:inline; margin:0;">
<input type="hidden" name="action" value="search"  /><input type="text" name="string"  size="20" style="" id="search_query1" /><input type="hidden" name="title" value="1"  /><input type="submit" name=".submit" value="Search" /><input type="hidden" name="body" value="on"  /></form></td></tr> </table>
<br clear=all>
Yalb is a (yet another) bot that runs Lua code in a sandbox. It resides in #lua and its prefix character is <code>%</code><p>
Unlike other bots, it can execute more than one version of Lua: everything from 3.2 to 5.3 and even <a href="/wiki/LuaJit" >LuaJit</a>.<p>
<H3>Interface</H3>
<p>
The command format is as follows: <code>%&lt;version&gt; &lt;code&gt;</code><p>
<code>&lt;version&gt;</code> is, for instance, <code>5.3</code> or <code>luajit</code> . You can leave it blank, and then the default (5.2) is used.<p>
Besides Lua, there are a few other sandboxes, like <code>py</code>, <code>bc</code>, and even <code>c</code>. See <code>%list</code> for a complete list.<p>
<code>&lt;code&gt;</code> can as well begin with a pastebin link, in which case the code is pulled from the pastebin, and concatenated with the rest of the input, making it possible to provide long input for the bot. Currently, the list of pastebins you can use is restricted (for security reasons), however you can poke the author to allow new ones. Keep in mind that the bot doesn't do SSL (HTTPS).<p>
If you double the <code>%</code> sign, i. e. <code>%%&lt;version&gt; &lt;code&gt;</code> , the output will be redirected to yalb's own pastebin ring, thus making it possible to also have long output without spamming the channel.<p>
Another command is <code>%?&lt;version&gt; &lt;title&gt;</code> , which looks up a title (like <code>math.sin</code>, <code>lua_pcall</code>, or <code>6.4.1</code>) in the manual.<p>
Last but not least, there are 3 special commands:<p>
<UL>
<li> <code>%help</code> prints a slightly helpful message.<li> <code>%list</code> prints a list of sandboxes.<li> <code>%cleanup</code> reverts the filesystem to its original state.</UL>
<p>
<H3>Sandbox</H3>
<p>
There is a function called <code>pp</code> which does pretty-printing. It takes zero or more values as arguments, and returns a string. It doesn't perform a deep inspection of tables, but displays identical tables/functions/userdata accordingly.<p>
The sandbox pretty-prints whatever has been returned from the code, but unlike <a href="/wiki/BatBot" >BatBot</a>, it doesn't insert a <code>return</code> automatically.<p>
The sandbox doesn't remove any functions, but a lot of them are rendered useless, e. g. <code>os.execute</code> returns <code>-1</code> no matter what, because creating a new process is prohibited.<p>
Execution time is capped at 3 seconds, memory is limited to roughly 45 megabytes.<p>
You are allowed to read files in a few specific locations like <code>/dev/</code> or <code>/usr/include/</code>.You can also manipulate the filesystem inside the current directory, but the amount of data you can place there is limited.<p>
Yes, it does take PMs.<p>
<strong>Source:</strong> The backend is a ptrace mess available <a href="https://gist.github.com/mniip/10599541">[here]</a>. The front-end is a 100-line Lua script which was hacked together in 15 minutes.<p>
<strong>Author:</strong> mniip<hr>
<a href="/wiki/RecentChanges" >RecentChanges</a> &middot; <a href="/cgi-bin/wiki.pl?action=editprefs" >preferences</a><br>
<a href="/cgi-bin/wiki.pl?action=edit&amp;id=YetAnotherLuaBot" >edit</a> &middot; <a href="/cgi-bin/wiki.pl?action=history&amp;id=YetAnotherLuaBot" >history</a><br>Last edited August 10, 2015 12:20 pm GMT <a href="/cgi-bin/wiki.pl?action=browse&amp;diff=1&amp;id=YetAnotherLuaBot" >(diff)</a>
</body>
</html>